function IndexCtrl(t,e,i,n,o,s,a,r,l){function c(o){i.get("/api/lists/"+u+"/"+t.p+p).then(function(i){console.log(t.p),o?(e.ad_counter=0,t.posts=[],addPostsToScope(i.data.posts,t,e.show_featured_banner)):addPostsToScope(i.data.posts,t,e.show_featured_banner),a.setHrefLang(n.current.canonical_path),addPagingMeta(i.data.posts,t.defaultPage,h,a),t.paginationMessage=i.data.meta.summary,t.ready=!0},function(t){console.log(t),a.setStatusCode(404),a.setCanonical("/404")})}a.init(),e.show_banner=!0,e.show_featured_banner=!0,e.large_container=!0,t.p=n.current.params.page?parseInt(n.current.params.page):1,t.defaultPage=n.current.params.page?parseInt(n.current.params.page):1,t.loadingInfinite=!1;var u=n.current.default_sort;t.sort=u,t.page="homepage";var h=n.current.international_canonical_path;if(h||(h=n.current.canonical_path),o.search().s)return void o.url("/search/"+o.search().s);"new"!=u&&(e.show_featured_banner=!1),t.country=$("body").attr("data-country");var p="";"US"!=t.country&&(p="?country="+t.country),n.current.country&&(p="?country="+n.current.country,t.country=n.current.country),e.country=t.country,i.get("/api/lists/featured").then(function(e){t.featured_posts=e.data.posts,t.p=1,c(!1)},function(t){}),t.nextPage=function(){t.loadingInfinite||(console.log("Loading infintie page "+t.p),t.p+=1,i.get("/api/lists/"+u+"/"+t.p+p).success(function(i,n,o,s){addPostsToScope(i.posts,t,e.show_featured_banner),t.loadingInfinite=!1}),t.loadingInfinite=!0)},t.$watch("first_time_viewer",function(i,o){1==i&&"/"==n.current.canonical_path&&(t.posts=[],u="clicks_score_amazon_available",t.sort="clicks_score_amazon_available",t.p=1,e.show_featured_banner=!1,c(!0))}),t.$watch("dynamicSort",function(e,i){console.log("Dynamic sort change was detected"),t.dynamicSort&&(console.log("Dynamic sort it not empty"),t.posts=[],u=t.dynamicSort,t.sort=t.dynamicSort,t.p=1,c(!0))}),a.setTitle("ThisIsWhyImBroke :: The Internet's Mall"),a.setMetaDescription("ThisIsWhyImBroke is where you'll find cool and unique gift ideas. You'll never give a boring gift again with our never ending list of amazing products."),a.setIndex(),t.renderHtml=function(t){return l.trustAsHtml(t)},t.isBlackFriday=function(){var t=new Date,e=new Date("2016-11-24T01:00:00-08:00"),i=new Date("2016-11-25T23:59:59-08:00");return t<=i&&t>=e?(window.localize(),!0):(window.localize(),!1)},t.isCyberMonday=function(){var t=new Date,e=new Date("2016-11-28T01:00:00-08:00"),i=new Date("2016-12-02T23:59:59-08:00");return t<=i&&t>=e?(window.localize(),!0):(window.localize(),!1)},t.track_impressions=!0}function GiftsCtrl(t,e,i,n,o,s,a,r){function l(e,n,o,s){o&&(t.p=1,u=o,h=n?n:0,i.get("/api/gifts/"+c+"/"+p+"/"+t.p+"/?max="+u+"&min="+h+d).success(function(e,i,n,o){t.posts=[],addPostsToScope(e.posts,t)}))}a.init(),t.p=o.current.params.page?parseInt(o.current.params.page):1,t.defaultPage=o.current.params.page?parseInt(o.current.params.page):1,t.loadingInfinite=!1,t.prime_message_enabled=!1;var c=o.current.params.list,u=150,h=0,p=o.current.default_sort;t.country=$("body").attr("data-country");var d="";"US"!=t.country&&(d="&country="+t.country),o.current.params.country&&(d="&country="+o.current.params.country,t.country=o.current.params.country),e.country=t.country,o.current.params.sort&&(p=o.current.params.sort),p||(p="new"),t.sort=p,t.sorting=!0;var f;t.changeSort=function(e){"US"!=t.country.toUpperCase()?n.url("/"+t.country.toLowerCase()+"/gifts/"+c+"/sort/"+e+"/"):n.url("/gifts/"+c+"/sort/"+e+"/")},i.get("/api/gifts/"+c+"/"+p+"/"+t.p+"/?"+d).then(function(e){var i=e.data;addPostsToScope(i.posts,t),t.category=i.category;var n=o.current.params.parent_list;n||(n=i.category.slug),i.category.parent_slug&&(n=i.category.parent_slug),t.parent_slug=n,a.setTitle(t.category.name+" | ThisIsWhyImBroke.com"),t.category.description?a.setMetaDescription(t.category.description):a.setMetaDescription("ThisIsWhyImBroke is where you'll find cool and unique gift ideas. You'll never give a boring gift again with our never ending list of amazing products.");var s="/"+o.current.params.list+"/";i.category.parent_slug&&i.category.slug!=i.category.parent_slug&&(s="/"+i.category.parent_slug+s),s="/gifts"+s,f=s,o.current.params.country&&(f="/"+o.current.params.country+s),a.setHrefLang(s),addPagingMeta(e.data.posts,t.defaultPage,f,a),t.paginationMessage=e.data.meta.summary,t.ready=!0},function(t){a.setStatusCode(404),a.setCanonical("/404")}),t.$watch("dynamicSort",function(e,i){console.log("Dynamic sort change was detected"),t.dynamicSort&&(console.log("Dynamic sort change was not empty"),t.sort=t.dynamicSort,p=t.sort,t.posts=[],t.p=0,t.nextPage(!0))}),t.nextPage=function(e){t.p+=1;var n="/api/gifts/"+c+"/"+p+"/"+t.p+"/?max="+u+"&min="+h+d;i.get(n).success(function(i,n,o,s){e&&(t.posts=[]),addPostsToScope(i.posts,t),i.posts.length<1&&(t.infinite_finished=!0)})},t.slider={value:u,options:{floor:0,ceil:150,step:10,translate:function(t,e,i){return"ceil"!==i&&t<149?"$"+t:"Max"},onChange:l}},a.setIndex(),t.renderHtml=function(t){return r.trustAsHtml(t)},t.renderDescHtml=function(t){return t.length>110&&(t=t.substr(0,107),t+="..."),r.trustAsHtml(t)},t.track_impressions=!0}function PriceCtrl(t,e,i,n,o,s,a,r){function l(e,n,o,s){o&&(t.p=1,u=o,h=n,i.get("/api/lists/"+c+"/"+t.p+"/?max="+u+"&min="+h+p).success(function(e,i,n,o){t.posts=[],addPostsToScope(e.posts,t)}))}a.init(),e.show_banner=!0,e.large_container=!0,t.p=o.current.params.page?parseInt(o.current.params.page):1,t.defaultPage=o.current.params.page?parseInt(o.current.params.page):1,t.loadingInfinite=!1;var c=o.current.default_sort;o.current.params.sort&&(c=o.current.params.sort),t.sort=c,t.sorting=!0,t.page="price-range";var u=20,h=0;o.current.params.to&&(u=o.current.params.to),t.country=$("body").attr("data-country");var p="";"US"!=t.country&&(p="&country="+t.country),o.current.params.country&&(p="&country="+o.current.params.country,t.country=o.current.params.country);var d=o.current.canonical_path;o.current.params.country&&(d="/"+o.current.params.country+o.current.canonical_path),e.country=t.country,i.get("/api/lists/"+c+"/"+t.p+"/?max="+u+p).success(function(e,i,n,s){addPostsToScope(e.posts,t,!0),a.setTitle("Gifts Under $"+u+" | ThisIsWhyImBroke.com"),a.setMetaDescription("ThisIsWhyImBroke is where you'll find cool and unique gift ideas. You'll never give a boring gift again with our never ending list of amazing products."),a.setHrefLang(o.current.canonical_path),addPagingMeta(e.posts,t.defaultPage,d,a),t.paginationMessage=e.meta.summary,t.ready=!0}),t.nextPage=function(){if(!t.loadingInfinite){t.p+=1;var e="/api/lists/"+c+"/"+t.p+"/?max="+u+"&min="+h+p;i.get(e).success(function(e,i,n,o){addPostsToScope(e.posts,t,!0),t.loadingInfinite=!1}),t.loadingInfinite=!0}},t.changeSort=function(t){n.url(d+t)},t.slider={value:u,options:{floor:0,ceil:150,step:10,translate:function(t,e,i){return"ceil"!==i&&t<149?"$"+t:"Max"},onChange:l}},t.$watch("dynamicSort",function(e,i){t.dynamicSort&&(t.changeSort(t.dynamicSort),t.posts=[])}),a.setIndex(),t.renderHtml=function(t){return r.trustAsHtml(t)},t.isBlackFriday=function(){var t=new Date,e=new Date("2016-11-24T01:00:00-08:00"),i=new Date("2016-11-25T23:59:59-08:00");return t<=i&&t>=e?(window.localize(),!0):(window.localize(),!1)},t.isCyberMonday=function(){var t=new Date,e=new Date("2016-11-28T01:00:00-08:00"),i=new Date("2016-12-02T23:59:59-08:00");return t<=i&&t>=e?(window.localize(),!0):(window.localize(),!1)},t.track_impressions=!0}function PostCtrl(t,e,i,n,o,s,a,r,l){function c(e){i.get("/api/related/"+e+"/1/?items=100"+d).then(function(e){return 1==window.no_related?(f=!0,void t.nextPage()):(addPostsToScope(e.data.posts,t,!1,!0),void(f=!0))},function(t){console.log(t)})}r.init(),r.setPostFooter();var u,h=o.current.params.slug,p=!1;t.url=n.absUrl(),t.country=$("body").attr("data-country");var d="";"US"!=t.country&&(d="&country="+t.country),o.current.country&&(d="&country="+o.current.country,t.country=o.current.country),e.country=t.country,i.get("/api/posts/"+h+"/?size=large"+d).then(function(e){function i(){t.post.subtagged?window.location.href=s.link:(console.log("Waiting for subtag"),l(function(){i()},200))}var s=e.data.post;"US"!=t.country&&s.link.indexOf("amazon")>=0&&!(s.link.indexOf("georiot")>=0)&&("GB"==t.country.toUpperCase()||"UK"==t.country.toUpperCase()?s.link="https://www.amazon.co.uk/s/?field-keywords="+s.title+"&tag=097-uk-21":"CA"==t.country.toUpperCase()&&(s.link="https://www.amazon.ca/s/?field-keywords="+s.title+"&tag=097-ca-20")),t.post=s,u=s.id,l(function(){c(s.id)},500);var a="/"+s.slug+"/";o.current.country&&(a="/"+o.current.country+a),r.setTitle(s.title),r.setCanonical(a),r.setHrefLang("/"+s.slug+"/"),r.setOpenGraph({title:s.title,url:n.absUrl(),description:s.content,image:s.images[0].src,type:"article",imageWidth:s.images[0].width,imageHeight:s.images[0].height}),r.setMetaDescription(t.post.content),r.setMetaKeywords(t.post.title),r.setIndex(),t.post.fuzzy_match&&(r.setRedirect("/"+s.slug+"/"),r.setStatusCode(301)),t.ready=!0,"y"==n.search().r&&i()},function(t){r.setStatusCode(404),r.setCanonical("/404"),p=!0});var f=!1;t.renderHtml=function(t){return a.trustAsHtml(t)};var g=1;t.infinite_finished=!1,t.related_items=[];var m=!1;t.nextPage=function(){function e(){t.post||p?n():(console.log("Waiting for post"),l(function(){e()},200))}function n(){m=!0;var e="/api/lists/clicks_score_amazon_available/";window.relatedInfinite&&(e=window.relatedInfinite);var n=e+g+"/?country="+t.country;i.get(n).success(function(e,i,n,o){if(m=!1,e.posts.length<1&&(t.infinite_finished=!0),t.posts&&t.posts instanceof Array)for(var s=0;s<e.posts.length;s++)t.posts.push(e.posts[s]);else t.posts=e.posts}),g+=1}if(!m&&f){if(t.infinite_finished||p)return void console.log("Finished infinite scrolling");e(),window.next_page=n}},t.isBlackFriday=function(){var t=new Date,e=new Date("2016-11-24T01:00:00-08:00"),i=new Date("2016-11-25T23:59:59-08:00");return t<=i&&t>=e?(window.localize(),!0):(window.localize(),!1)}}function WishlistCtrl(t,e,i,n,o,s,a,r){r.init();var l=o.current.params.user_id,c=1,u=$("body").attr("data-country"),h="";"US"!=u&&(h="&country="+u),t.url=n.absUrl(),t.$watch("auth_finished",function(o){return!l&&e.is_logged_in?void n.path("/wishlist/"+e.user_id).replace():(l==e.user_id?(r.setTitle("My Wish List"),t.title="My Wish List",t.own_wishlist=!0):i.get("/api/user/info/"+l).success(function(e,i,n,o){r.setTitle(e.username+"'s Wish List"),t.title=e.username+"'s Wish List"}),r.setMetaDescription("View my wishlist from ThisIsWhyImBroke and enjoy going broke while buying all of these amazing gifts for me!"),void(t.ready=!0))}),t.infinite_finished=!1,i.get("/api/user/wishlist/"+l+"/"+c+"/?now="+(new Date).getTime()+h).success(function(e,i,n,o){addPostsToScope(e.posts,t)}),t.nextPage=function(){t.infinite_finished||(c+=1,i.get("/api/user/wishlist/"+l+"/"+c+"/?now="+(new Date).getTime()+h).success(function(e,i,n,o){e.posts.length<1&&(console.log("Scrolling finished"),t.infinite_finished=!0),addPostsToScope(e.posts,t,!1,!0)}))},r.setOpenGraph({title:"My Wishlist On ThisIsWhyImBroke",url:n.absUrl(),description:"This is my collection of my favorite products that I want. Have a look and buy me something!",image:n.protocol()+"://"+n.host()+"/assets/images/fb-thumbnail.jpg",type:"article",imageWidth:560,imageHeight:341}),r.setIndex(),t.renderHtml=function(t){return $sce.trustAsHtml(t)}}function ModifyWishlistCtrl(t,e,i,n,o,s,a,r,l,c){t.flash=r,t.removeWishlist=function(i){return n.is_logged_in?(console.log("Removing item "+i.id),i.saved=!1,n.wishlist_count-=1,void e({method:"POST",url:"/api/user/wishlist/remove",data:{post_id:i.id}}).success(function(t){})):void t.loginRegisterModal(!0,"Register to save "+i.title+" to your wishlist",i)},t.addWishlist=function(i){return console.log("Add wishlist called"),n.is_logged_in?(i.saved=!0,n.wishlist_count+=1,void e({method:"POST",url:"/api/user/wishlist/add",data:{post_id:i.id}}).success(function(t){})):void t.loginRegisterModal(!0,"Login or Register to save "+i.title+" to your wishlist",i)},t.loginRegisterModal=function(e,i,o){console.log("Scope.signup() called"),c.showModal({templateUrl:"partials/login-register-modal",controller:"LoginRegisterModalCtrl",inputs:{message:i,login:e}}).then(function(i){i.element.modal(),e?a(function(){$("#loginEmail").focus()},500):a(function(){$("#registerEmail").focus()},500),i.close.then(function(e){$(".modal-backdrop").remove(),o&&a(function(){n.is_logged_in&&t.addWishlist(o)},500)})})}}function LoginRegisterModalCtrl(t,e,i,n,o,s,a,r,l,c,u){t.message=c,t.login=u,t.register_submit=function(){var e=a.register(t.registerData);e.then(function(e){console.log(t.registerData);var i=a.logIn(t.registerData);i.then(function(t){$(".modal-register-post").css("display","block"),$(".modal-register").css("display","none"),a.isLoggedIn()},function(e){t.error=e})},function(e){t.error=e})},t.login_submit=function(){console.log(t.loginData);var e=a.logIn(t.loginData);e.then(function(e){r.remove("session_id"),r.remove("user_id"),a.isLoggedIn(),t.message="Success",t.error=void 0,t.close()},function(e){t.error="Your username or password was incorrect."})},t.close=function(t){console.log("close"),l(t,0)},t.switchToLogin=function(){$("#loginEmail").focus(),t.login=!0},t.switchToRegister=function(){$("#registerEmail").focus(),t.login=!1}}function PurchaseNotificationCtrl(t,e,i,n,o,s,a,r,l,c){t.closePurchaseNotifications=function(){console.log("Disabled purchase notifications"),l.put("disable_purchase_notification",!0),$("#purchase-notification").addClass("fade"),c.cancel(window.purchase_notification_timer);try{window.optimizely.push(["trackEvent","purchasenotification_close"])}catch(t){console.log(t.message)}}}function SearchCtrl(t,e,i,n,o,s,a,r,l,c){function u(i){h=i,p=1,e.get("/api/search/"+h+"/"+p+f).success(function(e,i,n,o){addPostsToScope(e.posts,t),e.posts.length<1&&(t.message="No results found. :("),l.setTitle("Search: "+h),l.setCanonical("/search/"+h),t.ready=!0})}l.init();var h=o.current?o.current.params.search_term:"",p=1;t.infinite_finished=!1,"redirect"==h&&r.s&&i.url("/search/"+r.s);var d=$("body").attr("data-country"),f="?country="+d;u(h),t.nextPage=function(){t.infinite_finished||(p+=1,e.get("/api/search/"+h+"/"+p+"/"+f).success(function(e,i,n,o){addPostsToScope(e.posts,t),e.posts.length<1&&(t.infinite_finished=!0)}))},l.setIndex(),t.renderHtml=function(t){return c.trustAsHtml(t)}}function SearchPartialCtrl(t,e,i,n,o,s,a){function r(t){i.url("/search/"+t)}t.search=r}function RegisterCtrl(t,e,i,n,o,s,a,r){r.init(),t.submit=function(){var e=a.register(t.registerData);e.then(function(e){var i=a.logIn(t.registerData);i.then(function(t){a.isLoggedIn(),s.history.back()},function(e){t.error=e})},function(e){t.error=e})},r.setTitle("Register"),r.setIndex(),t.ready=!0}function LogInCtrl(t,e,i,n,o,s,a,r,l,c){c.init(),t.flash=l,t.submit=function(){var e=r.logIn(t.loginData);e.then(function(e){s.remove("session_id"),s.remove("user_id"),r.isLoggedIn(),t.message="Success",t.error=void 0,window.referrer_url&&window.referrer_url.indexOf("/forgot")!==-1&&window.referrer_url.indexOf("/reset")!==-1?a.history.back():n.url("/")},function(e){t.error="Your username or password was incorrect."})},c.setTitle("Log In"),c.setIndex(),t.ready=!0}function LogOutCtrl(t,e,i,n,o,s,a,r,l){i.get("/api/user/logout/?now="+(new Date).getTime()).success(function(t,e,i,n){s.remove("session_id"),s.remove("user_id"),r.isLoggedIn(),a.history.back()}),l.setNoIndex(),t.ready=!0}function ProfileCtrl(t,e,i,n,o,s,a,r,l){r.init(),t.flash=l,t.changeData={},t.changeData.email=e.email,t.show_form=!0,t.$watch("auth_finished",function(t){t&&!e.is_logged_in&&(l.setMessage("Please register or log into your account first"),n.url("/"))}),t.submit=function(){t.show_form=!1,i({method:"POST",url:"/api/user/profile",data:$.param(t.changeData),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){"success"!=e.data.meta.status?t.error=e.data.meta.error:(t.message="Your details were updated successfully",a.isLoggedIn())},function(e){t.error="Your details could not be updated"})},r.setTitle("My Profile"),r.setIndex(),t.ready=!0}function ForgotCtrl(t,e,i,n,o,s,a,r,l){r.init(),t.flash=l,t.submit=function(){i({method:"POST",url:"/api/user/forgot",data:$.param(t.resetData),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){"success"!=e.data.meta.status?t.error=e.data.meta.error:t.message=e.data.meta.message},function(e){t.error="We could not find a user with that email"})},r.setTitle("Forgot My Password"),r.setIndex(),t.ready=!0}function ResetCtrl(t,e,i,n,o,s,a,r,l){r.init();var c=o.current.params.reset_code;t.submit=function(){i({method:"POST",url:"/api/user/reset",data:$.param({password:t.resetData.password,reset_code:c}),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){"success"!=e.data.meta.status?t.error=e.data.meta.error:t.message=e.data.meta.message},function(e){t.error="Your password could not be changed."})},r.setTitle("Reset My Password"),r.setIndex(),t.ready=!0}function BlogCtrl(t,e,i,n,o,s,a,r,l){i.get("/api/blog/").success(function(e,i,n,o){t.blogPosts=e.posts})}function BlogPostCtrl(t,e,i,n,o,s,a,r,l,c){var u=o.current.params.slug;i.get("/api/blog/"+u).success(function(e,i,o,s){t.blogPost=e.post,t.posts=e.post.posts,t.url=n.protocol()+"://"+n.host()+"/blog/"+e.post.slug}),i.get("/api/blog/").success(function(e,i,n,o){t.blogPosts=e.posts}),t.renderHtml=function(t){return c.trustAsHtml(t)}}function SimpleCtrl(t,e,i,n,o,s,a,r){r.init(),t.location=n,r.setIndex(),t.ready=!0}function ErrorCtrl(t,e,i,n,o,s,a,r){r.init(),r.setNoIndex(),r.setCanonical("/404"),r.setStatusCode("404"),t.ready=!0}function UnitedAirlinesCtrl(t,e,i,n,o,s,a,r){r.init(),r.setCanonical("/88-4"),t.ready=!0}function Advertising(t,e,i,n,o,s,a,r,l,c,u){u.init(),u.setCanonical("/advertising-that-doesnt-suck"),t.plans=[{name:"Basic $149",id:1,value:"Basic $149"},{name:"Premium $499",id:2,value:"Premium $499"},{name:"Platinum $1,999",id:3,value:"Platinum $1,999"}],t.testimonials=[{name:"Kimberly Corkum",image:"image3.jpg",company:"BurgaBox",link:"https://www.burgabox.com",testimonial:"ThisIsWhyImBroke not only significantly increased our website traffic, but also opened up the floodgates to amazing opportunities with interested investors, new customers, and other media placements. The overall burst of energy that TIWIB brought to BurgaBox was a sonic boom for our young company."},{name:"John Kyle",image:"image1.png",company:"Grow The Fuck Up Book",link:"https://www.amazon.com/dp/1511720247/?tag=097-20",testimonial:"TIWIB helped my book become a #1 Best Seller on Amazon within a matter of hours. The revenue generated from visibility on the site was absolutely overwhelming."},{name:"Jeffrey Simon",image:"image5.jpg",company:"Dropstop",link:"https://www.buydropstop.com/",testimonial:"This Is Why I'm Broke helped Drop Stop get noticed in a big way. The hits to our website and Amazon listing as well as accompanying sales were amazing! And what’s even more amazing, it kept on going for YEARS after the original post. Folks still tell us that's where they discovered our invention."},{name:"Tyler Ward",image:"image6.jpg",company:"PrankCandles",link:"http://www.PrankCandles.com",testimonial:"TIWIB drove 5 figures of sales and substantial traffic for over the year after it posted. It was the gift that kept giving because we ended up being highly rated on one of their categories so the sales continued for us for way longer than what we expected."},{name:"Isaac Lavi",image:"image4.jpg",company:"The Right Cup",link:"http://www.therightcup.com/",testimonial:"As a young company with a unique product, ThisIsWhyImBroke is where you wanna be. It is a great platform to help creators of cool, innovative and interesting products."},{name:"Karol Krupa",image:"image2.jpg",company:"RAFINO Coffee Grinding System",link:"https://www.kickstarter.com/projects/rafino/the-rafino-coffee-grind-refining-system",testimonial:"Getting listed on the front page was a big deal for us! Not only did it add credibility to our product but the number of eyeballs that saw, clicked and visited our site was huge!"},{name:"Cale Switzer",image:"image7.jpg",company:"Drive Stein",link:"https://drivestein.com",testimonial:"After we launched our product we had our doubts that it would actually sell after numerous failed marketing ventures. The day it went on TIWIB everything changed - sales came rolling in daily and I don't think Drive Stein would be here today without it."}],t.scrollTo=function(t){$("html, body").animate({scrollTop:$(document).height()},"slow")},t.submit=function(){if(!t.selectedPlan)return void(t.error="Please choose a package.");if(!t.ssnaSignup||!t.ssnaSignup.email)return void(t.error="Please provide a valid email address.");t.submitted=!0,l.eventTrack("conversion",{label:t.selectedPlan.name,category:"ssna"});var e="",n="",o=t.ssnaSignup.email,s=t.selectedPlan.name;t.ssnaSignup.link&&(n=t.ssnaSignup.link),t.ssnaSignup.name&&(e=t.ssnaSignup.name),i({method:"POST",url:"/api/user/ssnaleads",data:$.param({name:e,email:o,link:n,plan:s}),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){"success"!=e.data.meta.status?t.error=e.data.meta.error:t.error="There was an error processing your request. If this issue persists please contact ads@thisiswhyimbroke.com."},function(e){t.error="Product could not be submitted."})},t.ready=!0}function TempSubmitCtrl(t,e,i,n,o,s,a,r,l){r.init(),r.setTitle("Sorry submission is temporarily down"),t.submit=function(){if(!t.ssnaSignup.email)return void(t.error="Please provide a valid email address.");var e=t.ssnaSignup.email;i({method:"POST",url:"/api/user/ssnaleads",data:$.param({name:"",email:e,link:"",plan:""}),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){t.submitted=!0,t.message="Thank you"},function(t){})},r.setIndex(),t.ready=!0}function SubmitCtrl(t,e,i,n,o,s,a,r,l){r.init(),t.show_form=!0,t.$watch("auth_finished",function(t){t&&!e.is_logged_in&&n.url("/login/")}),t.submit=function(){return t.error="",t.submitData&&t.submitData.purchaseLink&&t.submitData.productTitle?(t.submitData.productPrice&&(t.submitData.productPrice=t.submitData.productPrice.replace("$","")),e.is_logged_in?(t.show_form=!1,void i({method:"POST",url:"/api/submit",data:$.param({image:t.images,title:t.submitData.productTitle,link:t.submitData.purchaseLink,price:t.submitData.productPrice,description:t.submitData.productDescription}),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){"success"!=e.data.meta.status?t.error=e.data.meta.error:t.message=e.data.meta.message},function(e){t.error="Product could not be submitted."})):void(t.error="Please log in to an account before submitting posts.")):void(t.error="Please fill out all the required fields.")},t.images=[],t.addImage=function(e){console.log("added image "+e),t.images.indexOf(e)!==-1||t.images.push(e),t.submitData.bulkUpload=null},r.setTitle("Submit a product"),r.setIndex(),t.ready=!0}function ContactCtrl(t,e,i,n,o,s,a,r){t.show_form=!0,e.show_banner=!1,s.scrollTo(0,0),t.submit=function(){return t.contactData&&t.contactData.name&&t.contactData.email&&t.contactData.message&&t.contactData.type?void i({method:"POST",url:"/api/contact/",data:$.param({name:t.contactData.name,email:t.contactData.email,message:t.contactData.message,type:t.contactData.type}),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){"success"!=e.data.meta.status?t.error=e.data.meta.error:(t.message="Thank you for contacting us.",t.error=""),t.show_form=!1},function(e){t.error="Your password could not be changed."}):void(t.error="Please fill out all required fields.")},t.ready=!0}function AffiliateCtrl(t,e,i,n,o,s,a,r){t.$watch("auth_finished",function(s){s&&!e.is_logged_in&&n.url("/login/"),i.get("/api/user/affiliate/"+o.current.params.username).success(function(e,i,n,o){t.data=e})}),t.ready=!0}function addPostsToScope(t,e,i,n){function o(t,i){e.posts.splice.apply(e.posts,[t,0].concat(i))}if(!(!t||!t instanceof Array||t.length<1)){if(t[0].sort&&t[0].sort!=e.sort&&!n)return void console.log("Posts discarded due to sort change");if(i&&1==t[0].page&&e.featured_posts&&e.featured_posts.length>0){var s=e.featured_posts[0];s.content_json=JSON.parse(s.content),s.page=1,t.splice.apply(t,[10,0].concat(s)),t.splice.apply(t,[11,0].concat({ghost:!0}))}if(i&&2==t[0].page&&e.featured_posts&&e.featured_posts.length>1){var s=e.featured_posts[1];s.content_json=JSON.parse(s.content),s.page=2,t.splice.apply(t,[10,0].concat(s)),t.splice.apply(t,[11,0].concat({ghost:!0}))}if(i&&4==t[0].page&&e.featured_posts&&e.featured_posts.length>2){var s=e.featured_posts[2];s.content_json=JSON.parse(s.content),s.page=4,t.splice.apply(t,[0,0].concat(s)),t.splice.apply(t,[1,0].concat({ghost:!0}))}if(i&&5==t[0].page&&e.featured_posts&&e.featured_posts.length>3){var s=e.featured_posts[3];s.content_json=JSON.parse(s.content),s.page=5,t.splice.apply(t,[0,0].concat(s)),t.splice.apply(t,[1,0].concat({ghost:!0}))}if(i&&6==t[0].page&&e.featured_posts&&e.featured_posts.length>4){var s=e.featured_posts[4];s.content=JSON.parse(s.content),s.page=6,t.splice.apply(t,[2,0].concat(s)),t.splice.apply(t,[3,0].concat({ghost:!0}))}if(e.posts&&e.posts instanceof Array){for(var a=t[0].page,r=0;r<e.posts.length;r++){if(a==e.posts[r].page)return void console.log("A duplicated page");if(e.posts[r].page>a)return void o(r,t)}for(var l=0;l<t.length;l++)e.posts.push(t[l])}else e.posts=t}}function addPagingMeta(t,e,i,n){var o=parseInt(e);t.length<1?(n.setStatusCode(404),n.setCanonical("/404"),n.setRelPrev(i+"page/"+(o-1))):parseInt(e)>1?(n.setRelNext(i+"page/"+(o+1)),n.setRelPrev(i+"page/"+(o-1)),n.setCanonical(i+"page/"+o)):(n.setRelNext(i+"page/"+(o+1)),n.setCanonical(i))}function simpleMatch(t,e){return t=t.replace("http://","").replace("https://","").replace("www.",""),t=t.indexOf("?")>-1?t.substring(0,t.indexOf("?")):t,t=t.lastIndexOf("/")==t.length-1?t.substring(0,t.lastIndexOf("/")):t,e=e.replace("http://","").replace("https://","").replace("www.",""),e=e.indexOf("?")>-1?e.substring(0,e.indexOf("?")):e,e=e.lastIndexOf("/")==e.length-1?e.substring(0,e.lastIndexOf("/")):e,t==e}function exactMatch(t,e){return t=t.replace("http://","").replace("https://","").replace("www.","").replace("/?","?"),t=t.lastIndexOf("/")==t.length-1?t.substring(0,t.lastIndexOf("/")):t,e=e.replace("http://","").replace("https://","").replace("www.","").replace("/?","?"),e=e.lastIndexOf("/")==e.length-1?e.substring(0,e.lastIndexOf("/")):e,t==e}function substringMatch(t,e){return t=t.lastIndexOf("/")==t.length-1?t.substring(0,t.lastIndexOf("/")):t,e=e.lastIndexOf("/")==e.length-1?e.substring(0,e.lastIndexOf("/")):e,t.indexOf(e)!=-1}function regexMatch(t,e){return null!==t.match(e)}function getUrlParameter(t){var e,i,n=decodeURIComponent(window.location.search.substring(1)),o=n.split("&");for(i=0;i<o.length;i++)if(e=o[i].split("="),e[0]===t)return void 0===e[1]||e[1]}GiftsCtrl.$inject=["$scope","$rootScope","$http","$location","$route","AuthService","Page","$sce"],IndexCtrl.$inject=["$scope","$rootScope","$http","$route","$location","AuthService","Page","$timeout","$sce"],PriceCtrl.$inject=["$scope","$rootScope","$http","$location","$route","AuthService","Page","$sce"],WishlistCtrl.$inject=["$scope","$rootScope","$http","$location","$route","$window","AuthService","Page"],SearchCtrl.$inject=["$scope","$http","$location","$rootScope","$route","$window","AuthService","$routeParams","Page","$sce"],LogInCtrl.$inject=["$scope","$rootScope","$http","$location","$route","$cookies","$window","AuthService","flash","Page"],LogOutCtrl.$inject=["$scope","$rootScope","$http","$location","$route","$cookies","$window","AuthService","Page"],RegisterCtrl.$inject=["$scope","$rootScope","$http","$location","$route","$window","AuthService","Page"],ErrorCtrl.$inject=["$scope","$rootScope","$http","$location","$route","$window","AuthService","Page"],ContactCtrl.$inject=["$scope","$rootScope","$http","$location","$route","$window","AuthService","Page"],SimpleCtrl.$inject=["$scope","$rootScope","$http","$location","$route","$window","AuthService","Page"],ProfileCtrl.$inject=["$scope","$rootScope","$http","$location","$route","$window","AuthService","Page","flash"],ForgotCtrl.$inject=["$scope","$rootScope","$http","$location","$route","$window","AuthService","Page","flash"],UnitedAirlinesCtrl.$inject=["$scope","$rootScope","$http","$location","$route","$window","AuthService","Page"],TempSubmitCtrl.$inject=["$scope","$rootScope","$http","$location","$route","$window","AuthService","Page","flash"],ResetCtrl.$inject=["$scope","$rootScope","$http","$location","$route","$window","AuthService","Page","flash"],BlogCtrl.$inject=["$scope","$rootScope","$http","$location","$route","$window","AuthService","Page","flash"],AffiliateCtrl.$inject=["$scope","$rootScope","$http","$location","$route","$window","AuthService","Page"],BlogPostCtrl.$inject=["$scope","$rootScope","$http","$location","$route","$window","AuthService","Page","flash","$sce"],PostCtrl.$inject=["$scope","$rootScope","$http","$location","$route","AuthService","$sce","Page","$timeout"],ModifyWishlistCtrl.$inject=["$scope","$http","$location","$rootScope","$route","$window","$timeout","flash","AuthService","ModalService"],LoginRegisterModalCtrl.$inject=["$scope","$http","$location","$rootScope","$route","$window","AuthService","$cookies","close","message","login"],PurchaseNotificationCtrl.$inject=["$scope","$http","$location","$rootScope","$route","$window","flash","AuthService","$cookies","$interval"],SearchPartialCtrl.$inject=["$scope","$http","$location","$rootScope","$route","$window","AuthService"],!function(t,e){"use strict";"function"==typeof define&&define.amd?define(["angular"],e):"object"==typeof module&&module.exports?module.exports=e(require("angular")):e(t.angular)}(this,function(t){"use strict";var e=t.module("rzModule",[]).factory("RzSliderOptions",function(){var e={floor:0,ceil:null,step:1,precision:0,minRange:null,maxRange:null,minLimit:null,maxLimit:null,id:null,translate:null,getLegend:null,stepsArray:null,draggableRange:!1,draggableRangeOnly:!1,showSelectionBar:!1,showSelectionBarEnd:!1,showSelectionBarFromValue:null,hidePointerLabels:!1,hideLimitLabels:!1,readOnly:!1,disabled:!1,interval:350,showTicks:!1,showTicksValues:!1,ticksTooltip:null,ticksValuesTooltip:null,vertical:!1,getSelectionBarColor:null,getPointerColor:null,keyboardSupport:!0,scale:1,enforceStep:!0,enforceRange:!1,noSwitching:!1,onlyBindHandles:!1,onStart:null,onChange:null,onEnd:null,rightToLeft:!1,boundPointerLabels:!0},i={},n={};return n.options=function(e){t.extend(i,e)},n.getOptions=function(n){return t.extend({},e,i,n)},n}).factory("rzThrottle",["$timeout",function(t){return function(e,i,n){var o,s,a,r=Date.now||function(){return(new Date).getTime()},l=null,c=0;n=n||{};var u=function(){c=r(),l=null,a=e.apply(o,s),o=s=null};return function(){var h=r(),p=i-(h-c);return o=this,s=arguments,0>=p?(t.cancel(l),l=null,c=h,a=e.apply(o,s),o=s=null):l||n.trailing===!1||(l=t(u,p)),a}}}]).factory("RzSlider",["$timeout","$document","$window","$compile","RzSliderOptions","rzThrottle",function(e,i,n,o,s,a){var r=function(t,e){this.scope=t,this.lowValue=0,this.highValue=0,this.sliderElem=e,this.range=void 0!==this.scope.rzSliderModel&&void 0!==this.scope.rzSliderHigh,this.dragging={active:!1,value:0,difference:0,offset:0,lowLimit:0,highLimit:0},this.positionProperty="left",this.dimensionProperty="width",this.handleHalfDim=0,this.maxPos=0,this.precision=0,this.step=1,this.tracking="",this.minValue=0,this.maxValue=0,this.valueRange=0,this.intermediateTicks=!1,this.initHasRun=!1,this.firstKeyDown=!1,this.internalChange=!1,this.fullBar=null,this.selBar=null,this.minH=null,this.maxH=null,this.flrLab=null,this.ceilLab=null,this.minLab=null,this.maxLab=null,this.cmbLab=null,this.ticks=null,this.init()};return r.prototype={init:function(){var e,i,o=this,s=function(){
o.calcViewDimensions()};this.applyOptions(),this.syncLowValue(),this.range&&this.syncHighValue(),this.initElemHandles(),this.manageElementsStyle(),this.setDisabledState(),this.calcViewDimensions(),this.setMinAndMax(),this.addAccessibility(),this.updateCeilLab(),this.updateFloorLab(),this.initHandles(),this.manageEventsBindings(),this.scope.$on("reCalcViewDimensions",s),t.element(n).on("resize",s),this.initHasRun=!0,e=a(function(){o.onLowHandleChange()},o.options.interval),i=a(function(){o.onHighHandleChange()},o.options.interval),this.scope.$on("rzSliderForceRender",function(){o.resetLabelsValue(),e(),o.range&&i(),o.resetSlider()}),this.scope.$watch("rzSliderOptions()",function(t,e){t!==e&&(o.applyOptions(),o.syncLowValue(),o.range&&o.syncHighValue(),o.resetSlider())},!0),this.scope.$watch("rzSliderModel",function(t,i){o.internalChange||t!==i&&e()}),this.scope.$watch("rzSliderHigh",function(t,e){o.internalChange||t!==e&&(null!=t&&i(),(o.range&&null==t||!o.range&&null!=t)&&(o.applyOptions(),o.resetSlider()))}),this.scope.$on("$destroy",function(){o.unbindEvents(),t.element(n).off("resize",s)})},findStepIndex:function(e){for(var i=0,n=0;n<this.options.stepsArray.length;n++){var o=this.options.stepsArray[n];if(o===e){i=n;break}if(t.isObject(o)&&o.value===e){i=n;break}}return i},syncLowValue:function(){this.options.stepsArray?this.lowValue=this.findStepIndex(this.scope.rzSliderModel):this.lowValue=this.scope.rzSliderModel},syncHighValue:function(){this.options.stepsArray?this.highValue=this.findStepIndex(this.scope.rzSliderHigh):this.highValue=this.scope.rzSliderHigh},getStepValue:function(e){var i=this.options.stepsArray[e];return t.isObject(i)?i.value:i},applyLowValue:function(){this.options.stepsArray?this.scope.rzSliderModel=this.getStepValue(this.lowValue):this.scope.rzSliderModel=this.lowValue},applyHighValue:function(){this.options.stepsArray?this.scope.rzSliderHigh=this.getStepValue(this.highValue):this.scope.rzSliderHigh=this.highValue},onLowHandleChange:function(){this.syncLowValue(),this.range&&this.syncHighValue(),this.setMinAndMax(),this.updateLowHandle(this.valueToOffset(this.lowValue)),this.updateSelectionBar(),this.updateTicksScale(),this.updateAriaAttributes(),this.range&&this.updateCmbLabel()},onHighHandleChange:function(){this.syncLowValue(),this.syncHighValue(),this.setMinAndMax(),this.updateHighHandle(this.valueToOffset(this.highValue)),this.updateSelectionBar(),this.updateTicksScale(),this.updateCmbLabel(),this.updateAriaAttributes()},applyOptions:function(){var e;e=this.scope.rzSliderOptions?this.scope.rzSliderOptions():{},this.options=s.getOptions(e),this.options.step<=0&&(this.options.step=1),this.range=void 0!==this.scope.rzSliderModel&&void 0!==this.scope.rzSliderHigh,this.options.draggableRange=this.range&&this.options.draggableRange,this.options.draggableRangeOnly=this.range&&this.options.draggableRangeOnly,this.options.draggableRangeOnly&&(this.options.draggableRange=!0),this.options.showTicks=this.options.showTicks||this.options.showTicksValues,this.scope.showTicks=this.options.showTicks,t.isNumber(this.options.showTicks)&&(this.intermediateTicks=!0),this.options.showSelectionBar=this.options.showSelectionBar||this.options.showSelectionBarEnd||null!==this.options.showSelectionBarFromValue,this.options.stepsArray?this.parseStepsArray():(this.options.translate?this.customTrFn=this.options.translate:this.customTrFn=function(t){return String(t)},this.options.getLegend&&(this.getLegend=this.options.getLegend)),this.options.vertical&&(this.positionProperty="bottom",this.dimensionProperty="height")},parseStepsArray:function(){this.options.floor=0,this.options.ceil=this.options.stepsArray.length-1,this.options.step=1,this.options.translate?this.customTrFn=this.options.translate:this.customTrFn=function(t){return t},this.getLegend=function(e){var i=this.options.stepsArray[e];return t.isObject(i)?i.legend:null}},resetSlider:function(){this.manageElementsStyle(),this.addAccessibility(),this.setMinAndMax(),this.updateCeilLab(),this.updateFloorLab(),this.unbindEvents(),this.manageEventsBindings(),this.setDisabledState(),this.calcViewDimensions()},initElemHandles:function(){t.forEach(this.sliderElem.children(),function(e,i){var n=t.element(e);switch(i){case 0:this.fullBar=n;break;case 1:this.selBar=n;break;case 2:this.minH=n;break;case 3:this.maxH=n;break;case 4:this.flrLab=n;break;case 5:this.ceilLab=n;break;case 6:this.minLab=n;break;case 7:this.maxLab=n;break;case 8:this.cmbLab=n;break;case 9:this.ticks=n}},this),this.selBar.rzsp=0,this.minH.rzsp=0,this.maxH.rzsp=0,this.flrLab.rzsp=0,this.ceilLab.rzsp=0,this.minLab.rzsp=0,this.maxLab.rzsp=0,this.cmbLab.rzsp=0},manageElementsStyle:function(){this.range?this.maxH.css("display",""):this.maxH.css("display","none"),this.alwaysHide(this.flrLab,this.options.showTicksValues||this.options.hideLimitLabels),this.alwaysHide(this.ceilLab,this.options.showTicksValues||this.options.hideLimitLabels);var t=this.options.showTicksValues&&!this.intermediateTicks;this.alwaysHide(this.minLab,t||this.options.hidePointerLabels),this.alwaysHide(this.maxLab,t||!this.range||this.options.hidePointerLabels),this.alwaysHide(this.cmbLab,t||!this.range||this.options.hidePointerLabels),this.alwaysHide(this.selBar,!this.range&&!this.options.showSelectionBar),this.options.vertical&&this.sliderElem.addClass("rz-vertical"),this.options.draggableRange?this.selBar.addClass("rz-draggable"):this.selBar.removeClass("rz-draggable"),this.intermediateTicks&&this.options.showTicksValues&&this.ticks.addClass("rz-ticks-values-under")},alwaysHide:function(t,e){t.rzAlwaysHide=e,e?this.hideEl(t):this.showEl(t)},manageEventsBindings:function(){this.options.disabled||this.options.readOnly?this.unbindEvents():this.bindEvents()},setDisabledState:function(){this.options.disabled?this.sliderElem.attr("disabled","disabled"):this.sliderElem.attr("disabled",null)},resetLabelsValue:function(){this.minLab.rzsv=void 0,this.maxLab.rzsv=void 0},initHandles:function(){this.updateLowHandle(this.valueToOffset(this.lowValue)),this.range&&this.updateHighHandle(this.valueToOffset(this.highValue)),this.updateSelectionBar(),this.range&&this.updateCmbLabel(),this.updateTicksScale()},translateFn:function(t,e,i,n){n=void 0===n||n;var o="",s=!1;n?(this.options.stepsArray&&(t=this.getStepValue(t)),o=String(this.customTrFn(t,this.options.id,i))):o=String(t),(void 0===e.rzsv||e.rzsv.length!==o.length||e.rzsv.length>0&&0===e.rzsd)&&(s=!0,e.rzsv=o),e.html(o),s&&this.getDimension(e)},setMinAndMax:function(){this.step=+this.options.step,this.precision=+this.options.precision,this.minValue=this.options.floor,this.options.enforceStep&&(this.lowValue=this.roundStep(this.lowValue),this.range&&(this.highValue=this.roundStep(this.highValue))),null!=this.options.ceil?this.maxValue=this.options.ceil:this.maxValue=this.options.ceil=this.range?this.highValue:this.lowValue,this.options.enforceRange&&(this.lowValue=this.sanitizeValue(this.lowValue),this.range&&(this.highValue=this.sanitizeValue(this.highValue))),this.applyLowValue(),this.range&&this.applyHighValue(),this.valueRange=this.maxValue-this.minValue},addAccessibility:function(){this.minH.attr("role","slider"),this.updateAriaAttributes(),!this.options.keyboardSupport||this.options.readOnly||this.options.disabled?this.minH.attr("tabindex",""):this.minH.attr("tabindex","0"),this.options.vertical&&this.minH.attr("aria-orientation","vertical"),this.range&&(this.maxH.attr("role","slider"),!this.options.keyboardSupport||this.options.readOnly||this.options.disabled?this.maxH.attr("tabindex",""):this.maxH.attr("tabindex","0"),this.options.vertical&&this.maxH.attr("aria-orientation","vertical"))},updateAriaAttributes:function(){this.minH.attr({"aria-valuenow":this.scope.rzSliderModel,"aria-valuetext":this.customTrFn(this.scope.rzSliderModel,this.options.id,"model"),"aria-valuemin":this.minValue,"aria-valuemax":this.maxValue}),this.range&&this.maxH.attr({"aria-valuenow":this.scope.rzSliderHigh,"aria-valuetext":this.customTrFn(this.scope.rzSliderHigh,this.options.id,"high"),"aria-valuemin":this.minValue,"aria-valuemax":this.maxValue})},calcViewDimensions:function(){var t=this.getDimension(this.minH);this.handleHalfDim=t/2,this.barDimension=this.getDimension(this.fullBar),this.maxPos=this.barDimension-t,this.getDimension(this.sliderElem),this.sliderElem.rzsp=this.sliderElem[0].getBoundingClientRect()[this.positionProperty],this.initHasRun&&(this.updateFloorLab(),this.updateCeilLab(),this.initHandles())},updateTicksScale:function(){if(this.options.showTicks){var t=this.step;this.intermediateTicks&&(t=this.options.showTicks);var e=Math.round((this.maxValue-this.minValue)/t)+1;this.scope.ticks=[];for(var i=0;e>i;i++){var n=this.roundStep(this.minValue+i*t),o={selected:this.isTickSelected(n)};if(o.selected&&this.options.getSelectionBarColor&&(o.style={"background-color":this.getSelectionBarColor()}),this.options.ticksTooltip&&(o.tooltip=this.options.ticksTooltip(n),o.tooltipPlacement=this.options.vertical?"right":"top"),this.options.showTicksValues&&(o.value=this.getDisplayValue(n,"tick-value"),this.options.ticksValuesTooltip&&(o.valueTooltip=this.options.ticksValuesTooltip(n),o.valueTooltipPlacement=this.options.vertical?"right":"top")),this.getLegend){var s=this.getLegend(n,this.options.id);s&&(o.legend=s)}this.options.rightToLeft?this.scope.ticks.unshift(o):this.scope.ticks.push(o)}}},isTickSelected:function(t){if(!this.range)if(null!==this.options.showSelectionBarFromValue){var e=this.options.showSelectionBarFromValue;if(this.lowValue>e&&t>=e&&t<=this.lowValue)return!0;if(this.lowValue<e&&e>=t&&t>=this.lowValue)return!0}else if(this.options.showSelectionBarEnd){if(t>=this.lowValue)return!0}else if(this.options.showSelectionBar&&t<=this.lowValue)return!0;return!!(this.range&&t>=this.lowValue&&t<=this.highValue)},updateFloorLab:function(){this.translateFn(this.minValue,this.flrLab,"floor"),this.getDimension(this.flrLab);var t=this.options.rightToLeft?this.barDimension-this.flrLab.rzsd:0;this.setPosition(this.flrLab,t)},updateCeilLab:function(){this.translateFn(this.maxValue,this.ceilLab,"ceil"),this.getDimension(this.ceilLab);var t=this.options.rightToLeft?0:this.barDimension-this.ceilLab.rzsd;this.setPosition(this.ceilLab,t)},updateHandles:function(t,e){"lowValue"===t?this.updateLowHandle(e):this.updateHighHandle(e),this.updateSelectionBar(),this.updateTicksScale(),this.range&&this.updateCmbLabel()},getHandleLabelPos:function(t,e){var i=this[t].rzsd,n=e-i/2+this.handleHalfDim,o=this.barDimension-i;return this.options.boundPointerLabels?this.options.rightToLeft&&"minLab"===t||!this.options.rightToLeft&&"maxLab"===t?Math.min(n,o):Math.min(Math.max(n,0),o):n},updateLowHandle:function(t){if(this.setPosition(this.minH,t),this.translateFn(this.lowValue,this.minLab,"model"),this.setPosition(this.minLab,this.getHandleLabelPos("minLab",t)),this.options.getPointerColor){var e=this.getPointerColor("min");this.scope.minPointerStyle={backgroundColor:e}}this.shFloorCeil()},updateHighHandle:function(t){if(this.setPosition(this.maxH,t),this.translateFn(this.highValue,this.maxLab,"high"),this.setPosition(this.maxLab,this.getHandleLabelPos("maxLab",t)),this.options.getPointerColor){var e=this.getPointerColor("max");this.scope.maxPointerStyle={backgroundColor:e}}this.shFloorCeil()},shFloorCeil:function(){var t=!1,e=!1,i=this.options.rightToLeft,n=this.flrLab.rzsp,o=this.flrLab.rzsd,s=this.minLab.rzsp,a=this.minLab.rzsd,r=this.maxLab.rzsp,l=this.maxLab.rzsd,c=this.ceilLab.rzsp,u=this.handleHalfDim,h=i?s+a>=n-o-5:n+o+5>=s,p=i?c+u+10>=s-a:s+a>=c-u-10,d=i?r>=n-o-u:n+o+u>=r,f=i?c+10>=r-l:r+l>=c-10;h?(t=!0,this.hideEl(this.flrLab)):(t=!1,this.showEl(this.flrLab)),p?(e=!0,this.hideEl(this.ceilLab)):(e=!1,this.showEl(this.ceilLab)),this.range&&(f?this.hideEl(this.ceilLab):e||this.showEl(this.ceilLab),d?this.hideEl(this.flrLab):t||this.showEl(this.flrLab))},updateSelectionBar:function(){var t=0,e=0,i=this.options.rightToLeft?!this.options.showSelectionBarEnd:this.options.showSelectionBarEnd,n=this.options.rightToLeft?this.maxH.rzsp+this.handleHalfDim:this.minH.rzsp+this.handleHalfDim;if(this.range)e=Math.abs(this.maxH.rzsp-this.minH.rzsp),t=n;else if(null!==this.options.showSelectionBarFromValue){var o=this.options.showSelectionBarFromValue,s=this.valueToOffset(o),a=this.options.rightToLeft?this.lowValue<=o:this.lowValue>o;a?(e=this.minH.rzsp-s,t=s+this.handleHalfDim):(e=s-this.minH.rzsp,t=this.minH.rzsp+this.handleHalfDim)}else i?(e=Math.abs(this.maxPos-this.minH.rzsp)+this.handleHalfDim,t=this.minH.rzsp+this.handleHalfDim):(e=Math.abs(this.maxH.rzsp-this.minH.rzsp)+this.handleHalfDim,t=0);if(this.setDimension(this.selBar,e),this.setPosition(this.selBar,t),this.options.getSelectionBarColor){var r=this.getSelectionBarColor();this.scope.barStyle={backgroundColor:r}}},getSelectionBarColor:function(){return this.range?this.options.getSelectionBarColor(this.scope.rzSliderModel,this.scope.rzSliderHigh):this.options.getSelectionBarColor(this.scope.rzSliderModel)},getPointerColor:function(t){return"max"===t?this.options.getPointerColor(this.scope.rzSliderHigh,t):this.options.getPointerColor(this.scope.rzSliderModel,t)},updateCmbLabel:function(){var t=null;if(t=this.options.rightToLeft?this.minLab.rzsp-this.minLab.rzsd-10<=this.maxLab.rzsp:this.minLab.rzsp+this.minLab.rzsd+10>=this.maxLab.rzsp){var e=this.getDisplayValue(this.lowValue,"model"),i=this.getDisplayValue(this.highValue,"high"),n="";n=e===i?e:this.options.rightToLeft?i+" - "+e:e+" - "+i,this.translateFn(n,this.cmbLab,"cmb",!1);var o=this.options.boundPointerLabels?Math.min(Math.max(this.selBar.rzsp+this.selBar.rzsd/2-this.cmbLab.rzsd/2,0),this.barDimension-this.cmbLab.rzsd):this.selBar.rzsp+this.selBar.rzsd/2-this.cmbLab.rzsd/2;this.setPosition(this.cmbLab,o),this.hideEl(this.minLab),this.hideEl(this.maxLab),this.showEl(this.cmbLab)}else this.showEl(this.maxLab),this.showEl(this.minLab),this.hideEl(this.cmbLab)},getDisplayValue:function(t,e){return this.options.stepsArray&&(t=this.getStepValue(t)),this.customTrFn(t,this.options.id,e)},roundStep:function(t,e){var i=e?e:this.step,n=parseFloat((t-this.minValue)/i).toPrecision(12);n=Math.round(+n)*i;var o=(this.minValue+n).toFixed(this.precision);return+o},hideEl:function(t){return t.css({opacity:0})},showEl:function(t){return t.rzAlwaysHide?t:t.css({opacity:1})},setPosition:function(t,e){t.rzsp=e;var i={};return i[this.positionProperty]=e+"px",t.css(i),e},getDimension:function(t){var e=t[0].getBoundingClientRect();return this.options.vertical?t.rzsd=(e.bottom-e.top)*this.options.scale:t.rzsd=(e.right-e.left)*this.options.scale,t.rzsd},setDimension:function(t,e){t.rzsd=e;var i={};return i[this.dimensionProperty]=e+"px",t.css(i),e},valueToOffset:function(t){return this.options.rightToLeft?(this.maxValue-this.sanitizeValue(t))*this.maxPos/this.valueRange||0:(this.sanitizeValue(t)-this.minValue)*this.maxPos/this.valueRange||0},sanitizeValue:function(t){return Math.min(Math.max(t,this.minValue),this.maxValue)},offsetToValue:function(t){return this.options.rightToLeft?(1-t/this.maxPos)*this.valueRange+this.minValue:t/this.maxPos*this.valueRange+this.minValue},getEventXY:function(t){var e=this.options.vertical?"clientY":"clientX";return e in t?t[e]:void 0===t.originalEvent?t.touches[0][e]:t.originalEvent.touches[0][e]},getEventPosition:function(t){var e=this.sliderElem.rzsp,i=0;return i=this.options.vertical?-this.getEventXY(t)+e:this.getEventXY(t)-e,(i-this.handleHalfDim)*this.options.scale},getEventNames:function(t){var e={moveEvent:"",endEvent:""};return t.touches||void 0!==t.originalEvent&&t.originalEvent.touches?(e.moveEvent="touchmove",e.endEvent="touchend"):(e.moveEvent="mousemove",e.endEvent="mouseup"),e},getNearestHandle:function(t){if(!this.range)return this.minH;var e=this.getEventPosition(t),i=Math.abs(e-this.minH.rzsp),n=Math.abs(e-this.maxH.rzsp);return n>i?this.minH:i>n?this.maxH:this.options.rightToLeft?e>this.minH.rzsp?this.minH:this.maxH:e<this.minH.rzsp?this.minH:this.maxH},focusElement:function(t){var e=0;t[e].focus()},bindEvents:function(){var e,i,n;this.options.draggableRange?(e="rzSliderDrag",i=this.onDragStart,n=this.onDragMove):(e="lowValue",i=this.onStart,n=this.onMove),this.options.onlyBindHandles||(this.selBar.on("mousedown",t.bind(this,i,null,e)),this.selBar.on("mousedown",t.bind(this,n,this.selBar))),this.options.draggableRangeOnly?(this.minH.on("mousedown",t.bind(this,i,null,e)),this.maxH.on("mousedown",t.bind(this,i,null,e))):(this.minH.on("mousedown",t.bind(this,this.onStart,this.minH,"lowValue")),this.range&&this.maxH.on("mousedown",t.bind(this,this.onStart,this.maxH,"highValue")),this.options.onlyBindHandles||(this.fullBar.on("mousedown",t.bind(this,this.onStart,null,null)),this.fullBar.on("mousedown",t.bind(this,this.onMove,this.fullBar)),this.ticks.on("mousedown",t.bind(this,this.onStart,null,null)),this.ticks.on("mousedown",t.bind(this,this.onTickClick,this.ticks)))),this.options.onlyBindHandles||(this.selBar.on("touchstart",t.bind(this,i,null,e)),this.selBar.on("touchstart",t.bind(this,n,this.selBar))),this.options.draggableRangeOnly?(this.minH.on("touchstart",t.bind(this,i,null,e)),this.maxH.on("touchstart",t.bind(this,i,null,e))):(this.minH.on("touchstart",t.bind(this,this.onStart,this.minH,"lowValue")),this.range&&this.maxH.on("touchstart",t.bind(this,this.onStart,this.maxH,"highValue")),this.options.onlyBindHandles||(this.fullBar.on("touchstart",t.bind(this,this.onStart,null,null)),this.fullBar.on("touchstart",t.bind(this,this.onMove,this.fullBar)),this.ticks.on("touchstart",t.bind(this,this.onStart,null,null)),this.ticks.on("touchstart",t.bind(this,this.onTickClick,this.ticks)))),this.options.keyboardSupport&&(this.minH.on("focus",t.bind(this,this.onPointerFocus,this.minH,"lowValue")),this.range&&this.maxH.on("focus",t.bind(this,this.onPointerFocus,this.maxH,"highValue")))},unbindEvents:function(){this.minH.off(),this.maxH.off(),this.fullBar.off(),this.selBar.off(),this.ticks.off()},onStart:function(e,n,o){var s,a,r=this.getEventNames(o);o.stopPropagation(),o.preventDefault(),this.calcViewDimensions(),e?this.tracking=n:(e=this.getNearestHandle(o),this.tracking=e===this.minH?"lowValue":"highValue"),e.addClass("rz-active"),this.options.keyboardSupport&&this.focusElement(e),s=t.bind(this,this.dragging.active?this.onDragMove:this.onMove,e),a=t.bind(this,this.onEnd,s),i.on(r.moveEvent,s),i.one(r.endEvent,a),this.callOnStart()},onMove:function(e,i,n){var o,s=this.getEventPosition(i),a=this.options.rightToLeft?this.minValue:this.maxValue,r=this.options.rightToLeft?this.maxValue:this.minValue;0>=s?o=r:s>=this.maxPos?o=a:(o=this.offsetToValue(s),o=n&&t.isNumber(this.options.showTicks)?this.roundStep(o,this.options.showTicks):this.roundStep(o)),this.positionTrackingHandle(o)},onEnd:function(t,e){var n=this.getEventNames(e).moveEvent;this.options.keyboardSupport||(this.minH.removeClass("rz-active"),this.maxH.removeClass("rz-active"),this.tracking=""),this.dragging.active=!1,i.off(n,t),this.callOnEnd()},onTickClick:function(t,e){this.onMove(t,e,!0)},onPointerFocus:function(e,i){this.tracking=i,e.one("blur",t.bind(this,this.onPointerBlur,e)),e.on("keydown",t.bind(this,this.onKeyboardEvent)),e.on("keyup",t.bind(this,this.onKeyUp)),this.firstKeyDown=!0,e.addClass("rz-active")},onKeyUp:function(){this.firstKeyDown=!0,this.callOnEnd()},onPointerBlur:function(t){t.off("keydown"),t.off("keyup"),this.tracking="",t.removeClass("rz-active")},getKeyActions:function(t){var e=t+this.step,i=t-this.step,n=t+this.valueRange/10,o=t-this.valueRange/10,s={UP:e,DOWN:i,LEFT:i,RIGHT:e,PAGEUP:n,PAGEDOWN:o,HOME:this.minValue,END:this.maxValue};return this.options.rightToLeft&&(s.LEFT=e,s.RIGHT=i,this.options.vertical&&(s.UP=i,s.DOWN=e)),s},onKeyboardEvent:function(t){var i=this[this.tracking],n=t.keyCode||t.which,o={38:"UP",40:"DOWN",37:"LEFT",39:"RIGHT",33:"PAGEUP",34:"PAGEDOWN",36:"HOME",35:"END"},s=this.getKeyActions(i),a=o[n],r=s[a];if(null!=r&&""!==this.tracking){t.preventDefault(),this.firstKeyDown&&(this.firstKeyDown=!1,this.callOnStart());var l=this;e(function(){var t=l.roundStep(l.sanitizeValue(r));if(l.options.draggableRangeOnly){var e,i,n=l.highValue-l.lowValue;"lowValue"===l.tracking?(e=t,i=t+n,i>l.maxValue&&(i=l.maxValue,e=i-n)):(i=t,e=t-n,e<l.minValue&&(e=l.minValue,i=e+n)),l.positionTrackingBar(e,i)}else l.positionTrackingHandle(t)})}},onDragStart:function(t,e,i){var n=this.getEventPosition(i);this.dragging={active:!0,value:this.offsetToValue(n),difference:this.highValue-this.lowValue,lowLimit:this.options.rightToLeft?this.minH.rzsp-n:n-this.minH.rzsp,highLimit:this.options.rightToLeft?n-this.maxH.rzsp:this.maxH.rzsp-n},this.onStart(t,e,i)},getValue:function(t,e,i,n){var o=this.options.rightToLeft,s=null;return s="min"===t?i?n?o?this.minValue:this.maxValue-this.dragging.difference:o?this.maxValue-this.dragging.difference:this.minValue:o?this.offsetToValue(e+this.dragging.lowLimit):this.offsetToValue(e-this.dragging.lowLimit):i?n?o?this.minValue+this.dragging.difference:this.maxValue:o?this.maxValue:this.minValue+this.dragging.difference:o?this.offsetToValue(e+this.dragging.lowLimit)+this.dragging.difference:this.offsetToValue(e-this.dragging.lowLimit)+this.dragging.difference,this.roundStep(s)},onDragMove:function(t,e){var i,n,o,s,a,r,l,c,u=this.getEventPosition(e);if(this.options.rightToLeft?(o=this.dragging.lowLimit,s=this.dragging.highLimit,l=this.maxH,c=this.minH):(o=this.dragging.highLimit,s=this.dragging.lowLimit,l=this.minH,c=this.maxH),a=s>=u,r=u>=this.maxPos-o,a){if(0===l.rzsp)return;i=this.getValue("min",u,!0,!1),n=this.getValue("max",u,!0,!1)}else if(r){if(c.rzsp===this.maxPos)return;n=this.getValue("max",u,!0,!0),i=this.getValue("min",u,!0,!0)}else i=this.getValue("min",u,!1),n=this.getValue("max",u,!1);this.positionTrackingBar(i,n)},positionTrackingBar:function(t,e){this.lowValue=t,this.highValue=e,this.applyLowValue(),this.range&&this.applyHighValue(),this.applyModel(),this.updateHandles("lowValue",this.valueToOffset(t)),this.updateHandles("highValue",this.valueToOffset(e))},positionTrackingHandle:function(t){var e=!1;t=this.applyMinMaxLimit(t),this.range&&(t=this.applyMinMaxRange(t),"lowValue"===this.tracking&&t>this.highValue?(this.options.noSwitching&&this.highValue!==this.minValue?t=this.applyMinMaxRange(this.highValue):(this.lowValue=this.highValue,this.applyLowValue(),this.updateHandles(this.tracking,this.maxH.rzsp),this.updateAriaAttributes(),this.tracking="highValue",this.minH.removeClass("rz-active"),this.maxH.addClass("rz-active"),this.options.keyboardSupport&&this.focusElement(this.maxH)),e=!0):"highValue"===this.tracking&&t<this.lowValue&&(this.options.noSwitching&&this.lowValue!==this.maxValue?t=this.applyMinMaxRange(this.lowValue):(this.highValue=this.lowValue,this.applyHighValue(),this.updateHandles(this.tracking,this.minH.rzsp),this.updateAriaAttributes(),this.tracking="lowValue",this.maxH.removeClass("rz-active"),this.minH.addClass("rz-active"),this.options.keyboardSupport&&this.focusElement(this.minH)),e=!0)),this[this.tracking]!==t&&(this[this.tracking]=t,"lowValue"===this.tracking?this.applyLowValue():this.applyHighValue(),this.updateHandles(this.tracking,this.valueToOffset(t)),this.updateAriaAttributes(),e=!0),e&&this.applyModel()},applyMinMaxLimit:function(t){return null!=this.options.minLimit&&t<this.options.minLimit?this.options.minLimit:null!=this.options.maxLimit&&t>this.options.maxLimit?this.options.maxLimit:t},applyMinMaxRange:function(t){var e="lowValue"===this.tracking?this.highValue:this.lowValue,i=Math.abs(t-e);return null!=this.options.minRange&&i<this.options.minRange?"lowValue"===this.tracking?this.highValue-this.options.minRange:this.lowValue+this.options.minRange:null!=this.options.maxRange&&i>this.options.maxRange?"lowValue"===this.tracking?this.highValue-this.options.maxRange:this.lowValue+this.options.maxRange:t},applyModel:function(){this.internalChange=!0,this.scope.$apply(),this.callOnChange(),this.internalChange=!1},callOnStart:function(){if(this.options.onStart){var t=this,e="lowValue"===this.tracking?"min":"max";this.scope.$evalAsync(function(){t.options.onStart(t.options.id,t.scope.rzSliderModel,t.scope.rzSliderHigh,e)})}},callOnChange:function(){if(this.options.onChange){var t=this,e="lowValue"===this.tracking?"min":"max";this.scope.$evalAsync(function(){t.options.onChange(t.options.id,t.scope.rzSliderModel,t.scope.rzSliderHigh,e)})}},callOnEnd:function(){if(this.options.onEnd){var t=this,e="lowValue"===this.tracking?"min":"max";this.scope.$evalAsync(function(){t.options.onEnd(t.options.id,t.scope.rzSliderModel,t.scope.rzSliderHigh,e)})}this.scope.$emit("slideEnded")}},r}]).directive("rzslider",["RzSlider",function(t){return{restrict:"AE",replace:!0,scope:{rzSliderModel:"=?",rzSliderHigh:"=?",rzSliderOptions:"&?",rzSliderTplUrl:"@"},templateUrl:function(t,e){return e.rzSliderTplUrl||"rzSliderTpl.html"},link:function(e,i){e.slider=new t(e,i)}}}]);return e.run(["$templateCache",function(t){t.put("rzSliderTpl.html",'<div class=rzslider><span class=rz-bar-wrapper><span class=rz-bar></span></span> <span class=rz-bar-wrapper><span class="rz-bar rz-selection" ng-style=barStyle></span></span> <span class="rz-pointer rz-pointer-min" ng-style=minPointerStyle></span> <span class="rz-pointer rz-pointer-max" ng-style=maxPointerStyle></span> <span class="rz-bubble rz-limit rz-floor"></span> <span class="rz-bubble rz-limit rz-ceil"></span> <span class=rz-bubble></span> <span class=rz-bubble></span> <span class=rz-bubble></span><ul ng-show=showTicks class=rz-ticks><li ng-repeat="t in ticks track by $index" class=rz-tick ng-class="{\'rz-selected\': t.selected}" ng-style=t.style ng-attr-uib-tooltip="{{ t.tooltip }}" ng-attr-tooltip-placement={{t.tooltipPlacement}} ng-attr-tooltip-append-to-body="{{ t.tooltip ? true : undefined}}"><span ng-if="t.value != null" class=rz-tick-value ng-attr-uib-tooltip="{{ t.valueTooltip }}" ng-attr-tooltip-placement={{t.valueTooltipPlacement}}>{{ t.value }}</span> <span ng-if="t.legend != null" class=rz-tick-legend>{{ t.legend }}</span></li></ul></div>')}]),e});var mod;mod=angular.module("infinite-scroll",[]),mod.directive("infiniteScroll",["$rootScope","$window","$timeout",function(t,e,i){return{link:function(n,o,s){var a,r,l,c;return e=angular.element(e),l=0,null!=s.infiniteScrollDistance&&n.$watch(s.infiniteScrollDistance,function(t){return l=parseInt(t,10)}),c=!0,a=!1,null!=s.infiniteScrollDisabled&&n.$watch(s.infiniteScrollDisabled,function(t){if(c=!t,c&&a)return a=!1,r()}),r=function(){var i,r,u,h;return h=e.height()+e.scrollTop(),i=o.offset().top+o.height(),r=i-h,u=r<=e.height()*l,u&&c?t.$$phase?n.$eval(s.infiniteScroll):n.$apply(s.infiniteScroll):u?a=!0:void 0},e.on("scroll",r),n.$on("$destroy",function(){return e.off("scroll",r)}),i(function(){return s.infiniteScrollImmediateCheck?n.$eval(s.infiniteScrollImmediateCheck)?r():void 0:r()},0)}}}]),function(t,e){"use strict";function i(){function t(t,i){return e.extend(Object.create(t),i)}function i(t,e){var i=e.caseInsensitiveMatch,n={originalPath:t,regexp:t},o=n.keys=[];return t=t.replace(/([().])/g,"\\$1").replace(/(\/)?:(\w+)(\*\?|[\?\*])?/g,function(t,e,i,n){var s="?"===n||"*?"===n?"?":null,a="*"===n||"*?"===n?"*":null;return o.push({name:i,optional:!!s}),e=e||"",""+(s?"":e)+"(?:"+(s?e:"")+(a&&"(.+?)"||"([^/]+)")+(s||"")+")"+(s||"")}).replace(/([\/$\*])/g,"\\$1"),n.regexp=new RegExp("^"+t+"$",i?"i":""),n}var n={};this.when=function(t,o){var s=e.copy(o);if(e.isUndefined(s.reloadOnSearch)&&(s.reloadOnSearch=!0),e.isUndefined(s.caseInsensitiveMatch)&&(s.caseInsensitiveMatch=this.caseInsensitiveMatch),n[t]=e.extend(s,t&&i(t,s)),t){var a="/"==t[t.length-1]?t.substr(0,t.length-1):t+"/";n[a]=e.extend({redirectTo:t},i(a,s))}return this},this.caseInsensitiveMatch=!1,this.otherwise=function(t){return"string"==typeof t&&(t={redirectTo:t}),this.when(null,t),this},this.$get=["$rootScope","$location","$routeParams","$q","$injector","$templateRequest","$sce",function(i,o,s,a,l,c,u){function h(t,e){var i=e.keys,n={};if(!e.regexp)return null;var o=e.regexp.exec(t);if(!o)return null;for(var s=1,a=o.length;s<a;++s){var r=i[s-1],l=o[s];r&&l&&(n[r.name]=l)}return n}function p(t){var n=$.current;v=m(),b=v&&n&&v.$$route===n.$$route&&e.equals(v.pathParams,n.pathParams)&&!v.reloadOnSearch&&!y,b||!n&&!v||i.$broadcast("$routeChangeStart",v,n).defaultPrevented&&t&&t.preventDefault()}function d(){var t=$.current,n=v;b?(t.params=n.params,e.copy(t.params,s),i.$broadcast("$routeUpdate",t)):(n||t)&&(y=!1,$.current=n,n&&n.redirectTo&&(e.isString(n.redirectTo)?o.path(w(n.redirectTo,n.params)).search(n.params).replace():o.url(n.redirectTo(n.pathParams,o.path(),o.search())).replace()),a.when(n).then(f).then(function(o){n==$.current&&(n&&(n.locals=o,e.copy(n.params,s)),i.$broadcast("$routeChangeSuccess",n,t))},function(e){n==$.current&&i.$broadcast("$routeChangeError",n,t,e)}))}function f(t){if(t){var i=e.extend({},t.resolve);e.forEach(i,function(t,n){i[n]=e.isString(t)?l.get(t):l.invoke(t,null,null,n)});var n=g(t);return e.isDefined(n)&&(i.$template=n),a.all(i)}}function g(t){var i,n;return e.isDefined(i=t.template)?e.isFunction(i)&&(i=i(t.params)):e.isDefined(n=t.templateUrl)&&(e.isFunction(n)&&(n=n(t.params)),e.isDefined(n)&&(t.loadedTemplateUrl=u.valueOf(n),i=c(n))),i}function m(){var i,s;return e.forEach(n,function(n,a){!s&&(i=h(o.path(),n))&&(s=t(n,{params:e.extend({},o.search(),i),pathParams:i}),s.$$route=n)}),s||n[null]&&t(n[null],{params:{},pathParams:{}})}function w(t,i){var n=[];return e.forEach((t||"").split(":"),function(t,e){if(0===e)n.push(t);else{var o=t.match(/(\w+)(?:[?*])?(.*)/),s=o[1];n.push(i[s]),n.push(o[2]||""),delete i[s]}}),n.join("")}var v,b,y=!1,$={routes:n,reload:function(){y=!0;var t={defaultPrevented:!1,preventDefault:function(){this.defaultPrevented=!0,y=!1}};i.$evalAsync(function(){p(t),t.defaultPrevented||d()})},updateParams:function(t){if(!this.current||!this.current.$$route)throw r("norout","Tried updating route when with no current route");t=e.extend({},this.current.params,t),o.path(w(this.current.$$route.originalPath,t)),o.search(t)}};return i.$on("$locationChangeStart",p),i.$on("$locationChangeSuccess",d),$}]}function n(){this.$get=function(){return{}}}function o(t,i,n){return{restrict:"ECA",terminal:!0,priority:400,transclude:"element",link:function(o,s,a,r,l){function c(){d&&(n.cancel(d),d=null),h&&(h.$destroy(),h=null),p&&(d=n.leave(p),d.then(function(){d=null}),p=null)}function u(){var a=t.current&&t.current.locals,r=a&&a.$template;if(e.isDefined(r)){var u=o.$new(),d=t.current,m=l(u,function(t){n.enter(t,null,p||s).then(function(){!e.isDefined(f)||f&&!o.$eval(f)||i()}),c()});p=m,h=d.scope=u,h.$emit("$viewContentLoaded"),h.$eval(g)}else c()}var h,p,d,f=a.autoscroll,g=a.onload||"";o.$on("$routeChangeSuccess",u),u()}}}function s(t,e,i){return{restrict:"ECA",priority:-400,link:function(n,o){var s=i.current,a=s.locals;o.html(a.$template);var r=t(o.contents());if(s.controller){a.$scope=n;var l=e(s.controller,a);s.controllerAs&&(n[s.controllerAs]=l),o.data("$ngControllerController",l),o.children().data("$ngControllerController",l)}n[s.resolveAs||"$resolve"]=a,r(n)}}}var a=e.module("ngRoute",["ng"]).provider("$route",i),r=e.$$minErr("ngRoute");a.provider("$routeParams",n),a.directive("ngView",o),a.directive("ngView",s),o.$inject=["$route","$anchorScroll","$animate"],s.$inject=["$compile","$controller","$route"]}(window,window.angular);var app=angular.module("myApp",["myApp.filters","myApp.services","myApp.directives","ngRoute","infinite-scroll","rzModule","ngCookies","angulartics","angulartics.google.analytics","ezfb","vcRecaptcha","angularModalService"]);app.config(["$routeProvider","$locationProvider",function(t,e){t.when("/gifts/:list/",{templateUrl:"partials/gifts",controller:GiftsCtrl,default_sort:"clicks_score_amazon_available"}).when("/:country/gifts/:list/",{templateUrl:"partials/gifts",controller:GiftsCtrl,default_sort:"clicks_score_amazon_available"}).when("/gifts/:list/page/:page",{templateUrl:"partials/gifts",controller:GiftsCtrl,default_sort:"clicks_score_amazon_available"
}).when("/:country/gifts/:list/page/:page",{templateUrl:"partials/gifts",controller:GiftsCtrl,default_sort:"clicks_score_amazon_available"}).when("/gifts/:list/sort/:sort",{templateUrl:"partials/gifts",controller:GiftsCtrl,default_sort:"clicks_score_amazon_available"}).when("/:country/gifts/:list/sort/:sort",{templateUrl:"partials/gifts",controller:GiftsCtrl,default_sort:"clicks_score_amazon_available"}).when("/gifts/:parent_list/:list/",{templateUrl:"partials/gifts",controller:GiftsCtrl,default_sort:"clicks_score_amazon_available"}).when("/:country/gifts/:parent_list/:list/",{templateUrl:"partials/gifts",controller:GiftsCtrl,default_sort:"clicks_score_amazon_available"}).when("/gifts/:parent_list/:list",{templateUrl:"partials/gifts",controller:GiftsCtrl,default_sort:"clicks_score_amazon_available"}).when("/:country/gifts/:parent_list/:list",{templateUrl:"partials/gifts",controller:GiftsCtrl,default_sort:"clicks_score_amazon_available"}).when("/gifts/:parent_list/:list/sort/:sort",{templateUrl:"partials/gifts",controller:GiftsCtrl,default_sort:"clicks_score_amazon_available"}).when("/:country/gifts/:parent_list/:list/sort/:sort",{templateUrl:"partials/gifts",controller:GiftsCtrl,default_sort:"clicks"}).when("/gifts/:list/sort/:sort/page/:page",{templateUrl:"partials/gifts",controller:GiftsCtrl,default_sort:"clicks_score_amazon_available"}).when("/:country/gifts/:list/sort/:sort/page/:page",{templateUrl:"partials/gifts",controller:GiftsCtrl,default_sort:"clicks_score_amazon_available"}).when("/gifts/:parent_list/:list/page/:page",{templateUrl:"partials/gifts",controller:GiftsCtrl,default_sort:"clicks_score_amazon_available"}).when("/:country/gifts/:parent_list/:list/page/:page",{templateUrl:"partials/gifts",controller:GiftsCtrl,default_sort:"clicks_score_amazon_available"}).when("/",{templateUrl:"partials/list-header",controller:IndexCtrl,default_sort:"new",canonical_path:"/"}).when("/uk/",{templateUrl:"partials/list-header",controller:IndexCtrl,default_sort:"new",canonical_path:"/",international_canonical_path:"/uk/",country:"uk"}).when("/ca/",{templateUrl:"partials/list-header",controller:IndexCtrl,default_sort:"new",canonical_path:"/",international_canonical_path:"/ca/",country:"ca"}).when("/!/",{redirectTo:"/"}).when("/page/:page",{templateUrl:"partials/list-header",controller:IndexCtrl,default_sort:"new",canonical_path:"/"}).when("/uk/page/:page",{templateUrl:"partials/list-header",controller:IndexCtrl,default_sort:"new",canonical_path:"/",international_canonical_path:"/uk/",country:"uk"}).when("/ca/page/:page",{templateUrl:"partials/list-header",controller:IndexCtrl,default_sort:"new",canonical_path:"/",international_canonical_path:"/ca/",country:"ca"}).when("/new/",{templateUrl:"partials/list-header",controller:IndexCtrl,default_sort:"new",canonical_path:"/new/"}).when("/uk/new/",{templateUrl:"partials/list-header",controller:IndexCtrl,default_sort:"new",canonical_path:"/new/",international_canonical_path:"/uk/new/",country:"uk"}).when("/ca/new/",{templateUrl:"partials/list-header",controller:IndexCtrl,default_sort:"new",canonical_path:"/new/",international_canonical_path:"/ca/new/",country:"ca"}).when("/new/page/:page/",{templateUrl:"partials/list-header",controller:IndexCtrl,default_sort:"new",canonical_path:"/new/"}).when("/uk/new/page/:page/",{templateUrl:"partials/list-header",controller:IndexCtrl,default_sort:"new",canonical_path:"/new/",international_canonical_path:"/uk/new/",country:"uk"}).when("/ca/new/page/:page/",{templateUrl:"partials/list-header",controller:IndexCtrl,default_sort:"new",canonical_path:"/new/",international_canonical_path:"/ca/new/",country:"ca"}).when("/popular/",{templateUrl:"partials/list-header",controller:IndexCtrl,default_sort:"clicks_score_amazon_available",canonical_path:"/popular/"}).when("/all-time-popular/",{templateUrl:"partials/list-header",controller:IndexCtrl,default_sort:"clicks_all",canonical_path:"/popular/"}).when("/uk/popular/",{templateUrl:"partials/list-header",controller:IndexCtrl,default_sort:"clicks_score_amazon_available",canonical_path:"/popular/",international_canonical_path:"/uk/popular/",country:"uk"}).when("/ca/popular/",{templateUrl:"partials/list-header",controller:IndexCtrl,default_sort:"clicks_score_amazon_available",canonical_path:"/popular/",international_canonical_path:"/ca/popular/",country:"ca"}).when("/popular/page/:page/",{templateUrl:"partials/list-header",controller:IndexCtrl,default_sort:"clicks_score_amazon_available",canonical_path:"/popular/"}).when("/uk/popular/page/:page/",{templateUrl:"partials/list-header",controller:IndexCtrl,default_sort:"clicks_score_amazon_available",canonical_path:"/popular/",international_canonical_path:"/uk/popular/"}).when("/ca/popular/page/:page/",{templateUrl:"partials/list-header",controller:IndexCtrl,default_sort:"clicks_score_amazon_available",canonical_path:"/popular/",international_canonical_path:"/ca/popular/"}).when("/wishlisted-price/:sort?",{templateUrl:"partials/list-slider",controller:PriceCtrl,default_sort:"clicks_score_amazon_available",canonical_path:"/wishlisted-price/"}).when("/:country/wishlisted-price/:sort?",{templateUrl:"partials/list-slider",controller:PriceCtrl,default_sort:"clicks_score_amazon_available",canonical_path:"/wishlisted-price/"}).when("/wishlisted-price/page/:page/",{templateUrl:"partials/list-slider",controller:PriceCtrl,default_sort:"clicks_score_amazon_available",canonical_path:"/wishlisted-price/"}).when("/:country/wishlisted-price/page/:page/",{templateUrl:"partials/list-slider",controller:PriceCtrl,default_sort:"clicks_score_amazon_available",canonical_path:"/wishlisted-price/"}).when("/wishlist/:user_id?",{templateUrl:"partials/list-wishlist",controller:WishlistCtrl,default_sort:"new"}).when("/search/:search_term",{templateUrl:"partials/list-search",controller:SearchCtrl,reloadOnSearch:!1}).when("/search/",{redirectTo:"/"}).when("/login/",{templateUrl:"partials/login",controller:LogInCtrl}).when("/logout/",{templateUrl:"partials/login",controller:LogOutCtrl}).when("/register/",{templateUrl:"partials/register",controller:RegisterCtrl}).when("/404/",{templateUrl:"partials/404",controller:ErrorCtrl}).when("/about/",{templateUrl:"partials/about",controller:ContactCtrl}).when("/privacy-policy/",{templateUrl:"partials/privacy",controller:SimpleCtrl}).when("/profile/",{templateUrl:"partials/profile",controller:ProfileCtrl}).when("/forgot/",{templateUrl:"partials/forgot",controller:ForgotCtrl}).when("/88-4/",{templateUrl:"partials/unitedairlines",controller:UnitedAirlinesCtrl}).when("/ssna",{templateUrl:"partials/temp_submit",controller:TempSubmitCtrl}).when("/submit",{templateUrl:"partials/temp_submit",controller:TempSubmitCtrl}).when("/reset/:reset_code",{templateUrl:"partials/reset",controller:ResetCtrl}).when("/blog/",{templateUrl:"partials/blog",controller:BlogCtrl}).when("/affiliates/:username",{templateUrl:"partials/affiliates",controller:AffiliateCtrl}).when("/blog/:slug",{templateUrl:"partials/blog-post",controller:BlogPostCtrl}).when("/:slug/",{templateUrl:"partials/post",controller:PostCtrl}).when("/uk/:slug/",{templateUrl:"partials/post",controller:PostCtrl,country:"uk"}).when("/ca/:slug/",{templateUrl:"partials/post",controller:PostCtrl,country:"ca"}).otherwise({redirectTo:"/"}),e.html5Mode(!0)}]),angular.module("infinite-scroll").value("THROTTLE_MILLISECONDS",100),app.config(["$httpProvider",function(t){t.interceptors.push(["$q",function(t){return{responseError:function(e){var i=t.defer();return i.reject(e),i.promise}}}])}]),app.config(["ezfbProvider",function(t){t.setInitParams({appId:"156176611132582"})}]),angular.module("myApp").controller("ModifyWishlistCtrl",ModifyWishlistCtrl),angular.module("myApp").controller("LoginRegisterModalCtrl",LoginRegisterModalCtrl),angular.module("myApp").controller("PurchaseNotificationCtrl",PurchaseNotificationCtrl),angular.module("myApp").controller("SearchPartialCtrl",SearchPartialCtrl),angular.module("myApp").controller("SimpleCtrl",SimpleCtrl);var app=angular.module("myApp.directives",[]);app.directive("keepScrollPos",["$route","$window","$timeout","$location","$anchorScroll",function(t,e,i,n,o){var s={},a={};return function(r,l,c){r.$on("$routeChangeStart",function(){t.current&&(s[JSON.stringify(t.current.params)]=e.pageYOffset,a[JSON.stringify(t.current.params)]=r.p)}),r.$on("$routeChangeSuccess",function(){function l(){var t=!1,n=Math.abs(e.pageYOffset-c);return n<.1?(t=!0,void i(function(){r.scrollingFinished=!0},1e3)):void(t||(e.scrollTo(0,c),i(l,200)))}if(n.hash())o();else{r.scrollingFinished=!1;var c=s[JSON.stringify(t.current.params)]||0,u=a[JSON.stringify(t.current.params)];u&&u>2&&(r.skeletonPages=parseInt(u)-2),l()}})}}]),app.directive("storeLastUrl",["$route","$window","$timeout","$location","$anchorScroll",function(t,e,i,n,o){return function(t,e,i){t.$on("$locationChangeStart",function(t,e,i){window.referrer_url=i})}}]),app.directive("wishlist",["$http",function(t){return{restrict:"E",controller:["$scope","$timeout","$document","$rootScope",function(e,i,n,o){e.$watch("posts",function(i){if(o.is_logged_in){var n=[];e.post&&!e.post.checked_for_save&&(n.push(e.post.id),e.post.checked_for_save=!0),angular.forEach(i,function(t,e){t.checked_for_save||0==t.id||(n.push(t.id),t.checked_for_save=!0)}),!n||n.length<1||t({method:"POST",url:"/api/user/wishlist",data:{post_ids:n}}).success(function(t){"success"!=t.meta.status||angular.forEach(t.posts,function(t,i){angular.forEach(e.posts,function(e,i){t.post_id==e.id&&(e.saved=!0)}),e.post&&t.post_id==e.post.id&&(e.post.saved=!0)})})}},!0)}]}}]),app.directive("affiliate",["$http",function(t){return{restrict:"E",controller:["$scope","$timeout","$document","$cookies",function(t,e,i,n){function o(t){for(var e=null,i=[],n=location.search.substr(1).split("&"),o=0;o<n.length;o++)i=n[o].split("="),i[0]===t&&(e=decodeURIComponent(i[1]));return e}if(!t.Affiliate){var s=n.get("affiliate");if(s)return void(t.Affiliate=s);if(o("aff")){var a=o("aff");if("057-20"!=a)return;var r=new Date;visited_cookie_expiry=new Date(r.getFullYear(),r.getMonth(),r.getDate()+30),n.put("affiliate",a,{expires:visited_cookie_expiry}),t.Affiliate=a}}}]}}]),app.directive("session",["$http",function(t){return{restrict:"E",controller:["$scope","$timeout","$document","$cookies",function(t,e,i,n){function o(t){for(var e=null,i=[],n=location.search.substr(1).split("&"),o=0;o<n.length;o++)i=n[o].split("="),i[0]===t&&(e=decodeURIComponent(i[1]));return e}function s(){return o("utm_campaign")?"newsletter_"+o("utm_campaign"):o("utm_source")?o("utm_source"):document.referrer?(url=document.referrer,ref=url.match(/:\/\/(.[^\/]+)/)[1],ref):"direct"}function a(){var e=n.get("visited"),i=e?"returning":"first time";if(!e){var o=new Date;visited_cookie_expiry=new Date(o.getFullYear()+10,o.getMonth(),o.getDate()),n.put("visited","1",{expires:visited_cookie_expiry}),t.first_time_viewer=!0}return i}if(!t.Session){var r=n.getObject("subtag_session");if(r)return void(t.Session=r);var l={};l.referrer=s(),l.session_type=a(),n.putObject("subtag_session",l),t.Session=l}}]}}]),app.directive("trackingSession",["$http",function(t){return{restrict:"E",controller:["$scope","$timeout","$document","$location","$cookies","$rootScope",function(e,i,n,o,s,a){function r(){e.Session?l():i(r,250)}function l(){var i=s.getObject("session_id"),n=s.getObject("user_id");return i?(a.tracking_session_id=i,void(a.tracking_user_id=n)):void t({method:"POST",url:"/api/user/sessionid",data:{device:navigator.userAgent,referrer:e.Session.referrer,device_width:window.screen.width,device_height:window.screen.height,user_id:n}}).success(function(t){a.tracking_session_id=t.session_id,s.putObject("session_id",t.session_id);var e=new Date;user_id_cookie_expiry=new Date(e.getFullYear()+10,e.getMonth(),e.getDate()),s.put("user_id",t.user_id,{expires:user_id_cookie_expiry})})}r()}]}}]),app.directive("subtag",["$http",function(t){return{restrict:"E",controller:["$scope","$timeout","$document","$location",function(e,i,n,o){function s(){e.Session?a():i(s,50)}function a(){t({method:"GET",url:"/api/subtag",params:{session:e.Session.session_type,referrer:e.Session.referrer,prev_url:window.referrer_url?window.referrer_url:document.referrer,current_url:o.path()}}).success(function(t){e.subtag=t.subtag,r(e.posts),e.post&&r(e.post)})}function r(t){e.subtag&&t&&(t.constructor!==Array&&(t={0:t}),angular.forEach(t,function(t,i){if(!t.subtagged&&!t.ad&&!t.ghost&&"post"==t.type){var n=e.subtag;n=n.replace("P000000",t.id.toString(36)),n=n.replace("P0",t.id.toString(36)),e.subtagOptimizelyMeta&&(n+="_"+e.subtagOptimizelyMeta),t.link=t.link.replace(/ascsubtag=(.*)$/,"ascsubtag="+n),e.Affiliate&&(t.link=t.link.replace(/tag=097-20/,"tag="+e.Affiliate)),t.subtagged=!0}}))}s(),e.$watch("posts",r,!0),e.$watch("post",r,!0),window.apply_subtags=r}]}}]),app.directive("ghosts",["$http",function(t){return{restrict:"E",controller:["$scope","$timeout","$document","$location",function(t,e,i,n){}]}}]),app.directive("schemaOrg",["$http",function(t){return{restrict:"E",controller:["$scope","$timeout","$document","$location",function(t,e,i,n){function o(e){e&&(t.productSchema={"@context":"http://schema.org","@type":"Product",image:e.image,name:e.title},e.price&&(t.productSchema.offers={"@type":"Offer",price:e.price,priceCurrency:"USD"}))}t.$watch("post",o,!0)}]}}]),app.directive("jsonld",["$filter","$sce",function(t,e){return{restrict:"E",template:function(){return'<script type="application/ld+json" ng-bind-html="onGetJson()"></script>'},scope:{json:"=json"},link:function(i,n,o){i.onGetJson=function(){return e.trustAsHtml(t("json")(i.json))}},replace:!0}}]),app.directive("addthisToolbox",["$timeout",function(t){return{restrict:"A",transclude:!0,replace:!0,template:"<div ng-transclude></div>",link:function(e,i,n){function o(){addthis.init(),addthis.layers&&"function"==typeof addthis.layers.refresh&&addthis.layers.refresh(),addthis.toolbox($(i).get())}t(o,500)}}}]),app.directive("stickyDetails",["$http",function(t){return{restrict:"E",controller:["$scope","$timeout","$document","$location","$interval",function(t,e,i,n,o){function s(){t.ready?(console.log(window.innerWidth),$("#page .flex-details.details").length&&window.innerWidth>990&&a()):e(s,1500)}function a(){var t=$("#page .flex-details.details"),e=$(window),i=t.offset(),n=184,o=$("article.post .flex-image"),s=o.offset().top+o.height();e.bind("scroll",function(){$(window).width()<800||(e.scrollTop()>i.top?e.scrollTop()+n<s-t.height()?(console.log("==Scrolling above bottom."),t.css("margin-top",e.scrollTop()-i.top+n+"px")):t.offset().top+t.height()>s-t.height()&&(console.log("==Reached bottom of container."),t.stop(),t.css("margin-top",s-t.height()-n+"px")):t.css("margin-top","0px"))})}s();var r;t.$on("$routeChangeStart",function(){o.cancel(r),$(window).unbind("scroll")})}]}}]),app.directive("optimizelyMeta",["$route","$window","$timeout","$interval",function(t,e,i,n){return{restrict:"E",controller:["$scope","$element","$attrs",function(t,e,i){t.$on("$routeChangeStart",function(){window.OptimizelyMetaInterval&&n.cancel(window.OptimizelyMetaInterval)}),t.$on("$viewContentLoaded",function(){t.subtagOptimizelyMeta=!1,t.optimizelySubtagged=!1,window.optimizely_subtag_finished=!1,window.OptimizelyMetaInterval=n(function(){if(t.subtag&&!t.optimizelySubtagged&&"undefined"!=typeof window.optimizely&&"undefined"!=typeof window.optimizely.allExperiments){var e,i,o=!1,s=document.URL,a="";for(var r in window.optimizely.activeExperiments){i=window.optimizely.activeExperiments[r],e=window.optimizely.allExperiments[i];for(var l=0;l<e.urls.length;l++){var c=e.urls[l];if("simple"==c.match&&simpleMatch(s,c.value)){o=!0;break}if("substring"==c.match&&substringMatch(s,c.value)){o=!0;break}if("exact"==c.match&&exactMatch(s,c.value)){o=!0;break}if("regex"==c.match&&regexMatch(s,c.value)){o=!0;break}}o&&"undefined"!=typeof e&&"[W]"!==e.name.substring(0,3)&&(a+=(a.length?".":"")+parseInt(i+optimizely.variationMap[i]).toString(36))}a&&(n.cancel(window.OptimizelyMetaInterval),console.log("Optimizely subtag: "+a),t.subtagOptimizelyMeta=a,t.optimizelySubtagged=!0,angular.forEach(t.posts,function(t,e){t.subtagged=!1}),t.post&&(t.post.subtagged=!1),$(".localize-done").removeClass("localize-done"),window.apply_subtags(),window.localize(),window.optimizely_subtag_finished=!0)}},200)})}]}}]),app.directive("optimizely",["$route","$window","$timeout",function(t,e,i){return{restrict:"E",controller:["$scope","$element","$attrs",function(t,e,i){t.$on("$viewContentLoaded",function(){var t=document.URL,e=!1;window.optimizely_loaded=!1;var i=$("body").attr("data-country"),n=setInterval(function(){if("US"!=i)return console.log("Blocked optimizely from running"),void clearInterval(n);if(window.optimizely){var o=window.optimizely;clearInterval(n);for(var s in o.allExperiments){var a=o.allExperiments[s];if(a.enabled===!0&&"manual"==a.activation_mode)for(var r=0;r<a.urls.length;r++){var l=a.urls[r];if("simple"==l.match&&simpleMatch(t,l.value)){e=!0,window.optimizely.push(["activate",s]),console.log("Simple match success: Activated "+s);break}if("substring"==l.match&&substringMatch(t,l.value)){e=!0,window.optimizely.push(["activate",s]),console.log("Substring match success: Activated "+s);break}if("exact"==l.match&&exactMatch(t,l.value)){e=!0,window.optimizely.push(["activate",s]),console.log("Exact match success: Activated "+s);break}if("regex"==l.match&&regexMatch(t,l.value)){e=!0,window.optimizely.push(["activate",s]),console.log("Regex match success: Activated "+s);break}}}e?window.optimizely_loaded=!0:window.optimizely.push(["trackEvent",t])}else console.log("waiting for optimizely")},200)})}]}}]),app.directive("localize",["$route","$window","$timeout",function(t,e,i){return{restrict:"E",controller:["$scope","$element","$attrs","$rootScope",function(t,e,n,o){function s(t){function e(){o.country?a(t):i(e,150)}e()}function a(e){t.subtag?r(o.country,e):i(a,150)}function r(e,i){var n=$(".localize:not(.localize-done)");if(angular.forEach(n,function(i,n){var o=$(i).attr("data-"+e.toLowerCase()+"-href");o||"uk"!=e.toLowerCase()||(o=$(i).attr("data-gb-href")),o||"gb"!=e.toLowerCase()||(o=$(i).attr("data-uk-href")),o&&$(i).attr("href",o);var s=t.subtag;t.subtagOptimizelyMeta&&(s+="_"+t.subtagOptimizelyMeta),$(i).attr("href",$(i).attr("href").replace(/ascsubtag=(.*)$/,"ascsubtag="+s)),$(i).addClass("localize-done"),t.Affiliate&&($(i).attr("href",$(i).attr("href").replace(/tag=dotdb-hp-300x250-20/,"tag="+t.Affiliate)),$(i).attr("href",$(i).attr("href").replace(/tag=dotdb-20/,"tag="+t.Affiliate)))}),"US"!=e.toUpperCase()&&("CA"==e.toUpperCase()||"UK"==e.toUpperCase()||"GB"==e.toUpperCase())){var o=e.toLowerCase();"gb"==o&&(o="uk");var n=$(".auto-localize:not(.localize-done)");angular.forEach(n,function(t,e){$(t).attr("href").toLowerCase().indexOf("/ca/")===-1&&$(t).attr("href").toLowerCase().indexOf("/uk/")===-1&&($(t).attr("href","/"+o+$(t).attr("href")),$(t).addClass("localize-done"))}),angular.forEach(i,function(t,e){t&&(t.localized||(t.uri="/"+o+t.uri,t.localized=!0))})}}t.$on("$viewContentLoaded",s),t.$watch("posts",s,!0),t.$watch("post",s,!0),window.localize=s}]}}]),app.directive("impressions",["$http",function(t){return{restrict:"E",controller:["$scope","$timeout","$document","$location","$interval","$rootScope",function(e,i,n,o,s,a){window.send_impressions=[],e.$on("$routeChangeStart",function(){window.imp_timer&&s.cancel(window.imp_timer),window.send_timer&&s.cancel(window.send_timer)}),e.$on("$routeChangeSuccess",function(){window.imp_timer=s(function(){e.track_impressions&&angular.forEach(e.posts,function(t,e){t.impression||$("article[data-post='"+t.id+"'] .image").visible(!1)&&(t.impression=!0,window.send_impressions.push(t.id))})},250),window.send_timer=s(function(){window.send_impressions.length<1||(t({method:"POST",url:"/api/user/tracking",data:{impressions:window.send_impressions,type:"impression",session_id:a.tracking_session_id},headers:{"Content-Type":"application/json"}}).success(function(t){}),send_impressions=[])},1e3)})}]}}]),app.run(["$http","$rootScope",function(t,e){e.click=function(i){i.ugly_link&&(i.link=i.ugly_link),t({method:"POST",url:"/api/user/tracking",data:{type:"click",session_id:e.tracking_session_id,post_id:i.id},headers:{"Content-Type":"application/json"}}).success(function(t){})}}]),angular.module("myApp.filters",[]).filter("interpolate",["version",function(t){return function(e){return String(e).replace(/\%VERSION\%/gm,t)}}]),angular.module("myApp").filter("cut",function(){return function(t,e,i,n){if(!t)return"";if(i=parseInt(i,10),!i)return t;if(t.length<=i)return t;if(t=t.substr(0,i),e){var o=t.lastIndexOf(" ");o!=-1&&("."!=t.charAt(o-1)&&","!=t.charAt(o-1)||(o-=1),t=t.substr(0,o))}return t+(n||" …")}}),angular.module("myApp").filter("decodeBase64",function(){return function(t){return atob(t)}}),angular.module("myApp").filter("encodeBase64",function(){return function(t){return btoa(t)}});var app=angular.module("myApp.services",[]);if(app.factory("AuthService",["$rootScope","$http","$q",function(t,e,i){function n(t){return i(function(i,n){e({method:"POST",url:"/api/user/login",data:$.param(t),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(t){"success"!=t.data.meta.status?n(t.data.meta.error):i(t.data.meta.status)},function(t){n("You could not be logged in")})})}function o(t){return i(function(i,n){e({method:"POST",url:"/api/user/register",data:$.param(t),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(t){"success"!=t.data.meta.status?n(t.data.meta.error):i(t.data.meta.status)},function(t){n("Register did not work")})})}function s(){return i(function(t,i){e.get("/api/user/me?now="+(new Date).getTime()).then(function(e){"success"==e.data.meta.status?t(e.data.data):i()},function(t){i()})})}function a(){var e=s();e.then(function(e){t.is_logged_in=!0,t.wishlist_count=e.wishlist_count,t.user_id=e.user_id,t.email=e.email,t.username=e.username,t.auth_finished=!0,t.access=e.access,window.access=e.access,window.auth_finished=t.auth_finished},function(){t.is_logged_in=!1,t.auth_finished=!0,window.auth_finished=t.auth_finished})}return a(),{isLoggedIn:a,logIn:n,register:o}}]),app.factory("flash",["$rootScope",function(t){var e=[],i="";return t.$on("$routeChangeSuccess",function(){i=e.shift()||""}),{setMessage:function(t){e.push(t)},getMessage:function(){return i}}}]),app.service("Page",["$rootScope","$location",function(t,e){return{setTitle:function(e){t.title=e},setCanonical:function(i){t.canonical=e.protocol()+"://"+e.host()+i},setNoIndex:function(){t.noindex=!0},setIndex:function(){t.noindex=!1},setOpenGraph:function(e){t.og=e},setRelPrev:function(i){t.relprev=e.protocol()+"://"+e.host()+i},setRelNext:function(i){t.relnext=e.protocol()+"://"+e.host()+i},init:function(){t.relnext=void 0,t.relprev=void 0,t.og=void 0,t.noindex=void 0,t.canonical=void 0,t.post_footer=void 0,t.meta_desc=void 0,t.meta_keywords=void 0,t.redirect=void 0,t.status_code=void 0,t.hreflang={},t.title="ThisIsWhyImBroke :: The Internet's Mall",t.ad_counter=0,t.featured_counter=0,t.show_banner=!1,t.large_container=!1},setHrefLang:function(i){t.hreflang={"en-GB":e.protocol()+"://"+e.host()+"/uk"+i,"en-CA":e.protocol()+"://"+e.host()+"/ca"+i,"en-US":e.protocol()+"://"+e.host()+i,en:e.protocol()+"://"+e.host()+i}},setPostFooter:function(){t.post_footer=!0},setMetaDescription:function(e){t.meta_desc=e},setMetaKeywords:function(e){t.meta_keywords=e},setStatusCode:function(e){t.status_code=parseInt(e)},setRedirect:function(i){t.redirect=e.protocol()+"://"+e.host()+i}}}]),function(t,e){"use strict";function i(t,i,n){function o(t,n,o){var a,r;o=o||{},r=o.expires,a=e.isDefined(o.path)?o.path:s,e.isUndefined(n)&&(r="Thu, 01 Jan 1970 00:00:00 GMT",n=""),e.isString(r)&&(r=new Date(r));var l=encodeURIComponent(t)+"="+encodeURIComponent(n);l+=a?";path="+a:"",l+=o.domain?";domain="+o.domain:"",l+=r?";expires="+r.toUTCString():"",l+=o.secure?";secure":"";var c=l.length+1;return c>4096&&i.warn("Cookie '"+t+"' possibly not set or overflowed because it was too large ("+c+" > 4096 bytes)!"),l}var s=n.baseHref(),a=t[0];return function(t,e,i){a.cookie=o(t,e,i)}}e.module("ngCookies",["ng"]).provider("$cookies",[function(){function t(t){return t?e.extend({},i,t):i}var i=this.defaults={};this.$get=["$$cookieReader","$$cookieWriter",function(i,n){return{get:function(t){return i()[t]},getObject:function(t){var i=this.get(t);return i?e.fromJson(i):i},getAll:function(){return i()},put:function(e,i,o){n(e,i,t(o))},putObject:function(t,i,n){this.put(t,e.toJson(i),n)},remove:function(e,i){n(e,void 0,t(i))}}}]}]),e.module("ngCookies").factory("$cookieStore",["$cookies",function(t){return{get:function(e){return t.getObject(e)},put:function(e,i){t.putObject(e,i)},remove:function(e){t.remove(e)}}}]),i.$inject=["$document","$log","$browser"],e.module("ngCookies").provider("$$cookieWriter",function(){this.$get=i})}(window,window.angular),!function(t){function e(e,i){var n="ezfb-social-plugin-wrap",o="display: inline-block; width: 0; height: 0; overflow: hidden;",s=["fbPage","fbComments"],a=function(t){var e='<span class="'+n+'" style="'+o+'">';return t.wrap(e).parent()},r=function(t){var e='<div class="'+n+'">';return t.wrap(e).parent()},l=function(t){return t.parent().hasClass(n)},c=function(t){var e=t.parent();return e.after(t).remove(),t};t.directive(i,["ezfb","$q","$document",function(t,n,o){var u=s.indexOf(i)>=0,h=i.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return{restrict:"EC",require:"?^ezfbXfbml",compile:function(i,n){return i.removeClass(h),function(i,n,o,s){function p(t){return function(){var e;d&&t===f&&(e=o.onrender,e&&i.$eval(e),d=!1,c(n))}}if(!s){var d=!1,f=0;t.$rendered().then(function(){n.addClass(h),i.$watch(function(){var t=[];return angular.forEach(e,function(e){t.push(o[e])}),t},function(e){var i;f++,d?t.XFBML.parse(n.parent()[0],p(f)):(d=!0,i=u?r:a,t.XFBML.parse(i(n)[0],p(f)))},!0)}),n.bind("$destroy",function(){l(n)&&c(n)})}}}}}])}t.provider("ezfb",function(){function t(t,e){return angular.isObject(e)?void angular.extend(t,e):angular.copy(t)}function e(t,e,i){return function(){return t.apply(e,i)}}var i={COMPLETED_REGISTRATION:"fb_mobile_complete_registration",VIEWED_CONTENT:"fb_mobile_content_view",SEARCHED:"fb_mobile_search",RATED:"fb_mobile_rate",COMPLETED_TUTORIAL:"fb_mobile_tutorial_completion",ADDED_TO_CART:"fb_mobile_add_to_cart",ADDED_TO_WISHLIST:"fb_mobile_add_to_wishlist",INITIATED_CHECKOUT:"fb_mobile_initiated_checkout",ADDED_PAYMENT_INFO:"fb_mobile_add_payment_info",ACHIEVED_LEVEL:"fb_mobile_level_achieved",UNLOCKED_ACHIEVEMENT:"fb_mobile_achievement_unlocked",SPENT_CREDITS:"fb_mobile_spent_credits"},n={CURRENCY:"fb_currency",REGISTRATION_METHOD:"fb_registration_method",CONTENT_TYPE:"fb_content_type",CONTENT_ID:"fb_content_id",SEARCH_STRING:"fb_search_string",SUCCESS:"fb_success",MAX_RATING_VALUE:"fb_max_rating_value",PAYMENT_INFO_AVAILABLE:"fb_payment_info_available",NUM_ITEMS:"fb_num_items",LEVEL:"fb_level",DESCRIPTION:"fb_description"},o=-1,s={api:[1,2,3],ui:1,getAuthResponse:o,getLoginStatus:0,login:0,logout:0,"Event.subscribe":1,"Event.unsubscribe":1,"XFBML.parse":1,"Canvas.Prefetcher.addStaticResource":o,"Canvas.Prefetcher.setCollectionMode":o,"Canvas.getPageInfo":0,"Canvas.hideFlashElement":o,"Canvas.scrollTo":o,"Canvas.setAutoGrow":o,"Canvas.setDoneLoading":0,"Canvas.setSize":o,"Canvas.setUrlHandler":0,"Canvas.showFlashElement":o,"Canvas.startTimer":o,"Canvas.stopTimer":0,"AppEvents.logEvent":o,"AppEvents.logPurchase":o,"AppEvents.activateApp":o},a="en_US",r={status:!0,cookie:!0,xfbml:!0,version:"v2.6"},l=["$window","$document","$timeout","ezfbAsyncInit","ezfbLocale",function(t,e,i,n,o){!function(t){var e=function(){var e,i="facebook-jssdk",n=t.getElementsByTagName("script")[0];t.getElementById(i)||(e=t.createElement("script"),e.id=i,e.async=!0,e.src="//connect.facebook.net/"+o+"/sdk.js",n.parentNode.insertBefore(e,n))};i(e,0,!1)}(e[0]),t.fbAsyncInit=n}],c=l,u=["$window","ezfbInitParams",function(t,e){t.FB.init(e)}],h=u;return{setInitParams:function(e){t(r,e)},getInitParams:function(){return t(r)},setLocale:function(t){a=t},getLocale:function(){return a},setLoadSDKFunction:function(t){if(!angular.isArray(t)&&!angular.isFunction(t))throw new Error("Init function type error.");c=t},getLoadSDKFunction:function(){return c},setInitFunction:function(t){if(!angular.isArray(t)&&!angular.isFunction(t))throw new Error("Init function type error.");h=t},getInitFunction:function(){return h},$get:["$window","$q","$document","$parse","$rootScope","$injector","$timeout",function(l,p,d,f,g,m,w){var v,b,y,$,_,S;return $={},_=p.defer(),(r.appId||h!==u)&&_.resolve(),v=p.defer(),b=p.defer(),d[0].getElementById("fb-root")||d.find("body").append('<div id="fb-root"></div>'),S=function(){_.promise.then(function(){if(r.xfbml){var t=function(){y.$$xfbmlRendered=!0,w(function(){b.resolve(!0)}),y.Event.unsubscribe("xfbml.render",t)};y.Event.subscribe("xfbml.render",t)}else w(function(){b.resolve(!1)});m.invoke(h,null,{ezfbInitParams:r}),y.$$ready=!0,v.resolve()})},m.invoke(c,null,{ezfbAsyncInit:S,ezfbLocale:a}),y={$$ready:!1,$$xfbmlRendered:!1,$ready:function(t){return angular.isFunction(t)&&v.promise.then(t),v.promise},$rendered:function(t){return angular.isFunction(t)&&b.promise.then(t),b.promise},init:function(e){t(r,e),_.resolve()},AppEvents:{EventNames:i,ParameterNames:n}},angular.forEach(s,function(t,i){var n=f(i),s=n.assign;s(y,function(){var s=e(function(e){var s,a;if(s=p.defer(),a=function(t){var n,o;for(n=angular.isFunction(e[t])?e[t]:angular.noop,o=function(){var t=Array.prototype.slice.call(arguments);g.$$phase?(n.apply(null,t),s.resolve.apply(s,t)):g.$apply(function(){n.apply(null,t),s.resolve.apply(s,t)})};e.length<=t;)e.push(null);var a;if("Event.subscribe"===i)a=e[0],angular.isUndefined($[a])&&($[a]=[]),$[a].push({original:n,wrapped:o});else if("Event.unsubscribe"===i&&(a=e[0],angular.isArray($[a]))){var r,l,c=$[a].length;for(r=0;c>r;r++)if(l=$[a][r],l.original===n){o=l.wrapped,$[a].splice(r,1);break}}e[t]=o},t!==o)if(angular.isNumber(t))a(t);else if(angular.isArray(t)){var r,c;for(r=0;r<t.length;r++)if(c=t[r],e.length==c||e.length==c+1&&angular.isFunction(e[c])){a(c);break}}var u=n(l.FB);if(!u)throw new Error("Facebook API `FB."+i+"` doesn't exist.");return u.apply(l.FB,e),s.promise},null,[Array.prototype.slice.call(arguments)]);if("getAuthResponse"===i){if(angular.isUndefined(l.FB))throw new Error("`FB` is not ready.");return l.FB.getAuthResponse()}return t!==o?v.promise.then(s):void v.promise.then(s)})}),y}]}}).directive("ezfbXfbml",["ezfb","$parse","$compile","$timeout",function(t,e,i,n){return{restrict:"EAC",controller:function(){},compile:function(o,s){var a=o.html();return function(o,s,r){var l=!0,c=r.onrender,u=function(){l&&(c&&o.$eval(c),l=!1)};t.XFBML.parse(s[0],u);var h=e(r.ezfbXfbml).assign;o.$watch(r.ezfbXfbml,function(e){e&&(l=!0,s.html(a),i(s.contents())(o),n(function(){t.XFBML.parse(s[0],u)}),(h||angular.noop)(o,!1))},!0)}}}}]);var i={fbLike:["action","colorscheme","href","kidDirectedSite","layout","ref","share","showFaces","width"],fbShareButton:["href","layout","width"],fbSend:["colorscheme","href","kidDirectedSite","ref"],fbPost:["href","width"],fbFollow:["colorscheme","href","kidDirectedSite","layout","showFaces","width"],fbComments:["colorscheme","href","mobile","numPosts","orderBy","width"],fbCommentsCount:["href"],fbActivity:["action","appId","colorscheme","filter","header","height","linktarget","maxAge","recommendations","ref","site","width"],fbRecommendations:["action","appId","colorscheme","header","height","linktarget","maxAge","ref","site","width"],fbRecommendationsBar:["action","href","maxAge","numRecommendations","readTime","ref","side","site","trigger"],fbLikeBox:["colorscheme","forceWall","header","height","href","showBorder","showFaces","stream","width"],fbFacepile:["action","appId","colorscheme","href","maxRows","size","width"],fbPage:["href","width","height","hideCover","showFacepile","showPosts"],
fbVideo:["href","width","allowfullscreen"],fbAdPreview:["adAccountId","adgroupId","creative","creativeId","adFormat","pageType","targeting","post"],fbSendToMessenger:["messengerAppId","pageId","ref","color","size"],fbMessengermessageus:["messengerAppId","pageId","color","size"]};angular.forEach(i,e)}(angular.module("ezfb",[])),$(document).ready(function(){function t(){$("#mobile-dropdown").removeClass("open"),$(".login-overlay").css("display","none"),$("#open-dropdown-mobile").removeClass("selected")}function e(){$("#mobile-dropdown").addClass("open"),$(".login-overlay").css("display","block"),$("#open-dropdown-mobile").addClass("selected")}function i(){"Max"!=$(".rz-ceil").text()?$(".rz-ceil").text("Max"):setTimeout(i,50)}function n(t){for(var e=escape(t)+"=",i=document.cookie.split(";"),n=0;n<i.length;n++){for(var o=i[n];" "==o.charAt(0);)o=o.substring(1,o.length);if(0==o.indexOf(e))return unescape(o.substring(e.length,o.length))}return null}function o(t,e,i){var n;if(i){var o=new Date;o.setTime(o.getTime()+24*i*60*60*1e3),n="; expires="+o.toGMTString()}else n="";document.cookie=encodeURIComponent(t)+"="+encodeURIComponent(e)+n+"; path=/"}function s(){window.auth_finished?window.access&&!window.post_debugger&&(window.post_debugger=$("body").on({mouseenter:function(){if(getUrlParameter("dev")){$(this).addClass("inside"),$("#post-debug").css("display","block");try{var t=JSON.parse(atob($(this).data("debug")));$("#debug-saves").text(t.saves),$("#debug-clicks").text(t.clicks),$("#debug-ctr").text(100*parseFloat(t.clicks_score)+"%"),$("#debug-impressions").text(t.impressions),$("#debug-clicks-score").text(t.clicks_score),$("#debug-sales-score").text(t.earnings_score)}catch(e){}}},mouseleave:function(){$(this).removeClass("inside"),$("#post-debug").css("display","none")}},"article")):setTimeout(s,1e3)}$(document).on("scroll",function(){$(document).scrollTop()>100?($("#masthead").addClass("shrink"),$("#mobile-nav").addClass("shrink")):($("#masthead").removeClass("shrink"),$("#mobile-nav").removeClass("shrink"))}),$("#open-mobile-search").on("click",function(t){t.preventDefault(),$(".mobile-search-box").hasClass("open")?($(".mobile-search-box").removeClass("open"),$(".login-overlay").css("display","none"),$(this).removeClass("selected")):($(".mobile-search-box").addClass("open"),$("#mobile-search-input").focus(),$(".login-overlay").css("display","block"),$(this).addClass("selected"))}),$(".login-overlay").on("click",function(){$(".mobile-search-box").hasClass("open")&&($(".mobile-search-box").removeClass("open"),$(".login-overlay").css("display","none"),$("#open-mobile-search").removeClass("selected")),$("#mobile-dropdown").hasClass("open")&&t()}),$("#open-dropdown-mobile").on("click",function(i){$("#mobile-dropdown").hasClass("open")?t():e()}),$("#mobile-dropdown a").on("click",function(e){t()}),i();var a,r=function(t,e,i){t.addEventListener?t.addEventListener(e,i,!1):t.attachEvent&&t.attachEvent("on"+e,i)},l=!1,c=.25,u=function(){console.log(n("cv-tiw007-clickout")),null===n("cv-tiw007-clickout")&&(o("cv-tiw007-exit-popup","showed","1000"),$("#exitPopup").modal(),window.localize())};$("body").on("click",'a[href^="http"]',function(t){o("cv-tiw007-clickout","clickout","1")}),null===n("cv-tiw007-exit-popup")&&(document.onmousemove=function(t){var e=window.pageYOffset||document.documentElement.scrollTop;a=t.pageY-e},setTimeout(function(){r(document,"mouseout",function(t){t=t?t:window.event;var e=t.relatedTarget||t.toElement;e&&"HTML"!=e.nodeName||window.innerHeight*c>a&&!l&&(l=!0,u())})},0)),setTimeout(s,1e3)}),!function(t){var e=t(window);t.fn.visible=function(t,i,n){if(!(this.length<1)){var o=this.length>1?this.eq(0):this,s=o.get(0),a=e.width(),r=e.height(),n=n?n:"both",l=i!==!0||s.offsetWidth*s.offsetHeight;if("function"==typeof s.getBoundingClientRect){var c=s.getBoundingClientRect(),u=c.top>=0&&c.top<r,h=c.bottom>0&&c.bottom<=r,p=c.left>=0&&c.left<a,d=c.right>0&&c.right<=a,f=t?u||h:u&&h,g=t?p||d:p&&d;if("both"===n)return l&&f&&g;if("vertical"===n)return l&&f;if("horizontal"===n)return l&&g}else{var m=e.scrollTop(),w=m+r,v=e.scrollLeft(),b=v+a,y=o.offset(),$=y.top,_=$+o.height(),S=y.left,k=S+o.width(),C=t===!0?_:$,x=t===!0?$:_,T=t===!0?k:S,z=t===!0?S:k;if("both"===n)return!!l&&w>=x&&C>=m&&b>=z&&T>=v;if("vertical"===n)return!!l&&w>=x&&C>=m;if("horizontal"===n)return!!l&&b>=z&&T>=v}}}}(jQuery),!function(t){"use strict";t.module("vcRecaptcha",[])}(angular),function(t){"use strict";function e(){throw new Error('You need to set the "key" attribute to your public reCaptcha key. If you don\'t have a key, please get one from https://www.google.com/recaptcha/admin/create')}var i=t.module("vcRecaptcha");i.provider("vcRecaptchaService",function(){var i=this,n={};i.onLoadFunctionName="vcRecaptchaApiLoaded",i.setDefaults=function(e){t.copy(e,n)},i.setSiteKey=function(t){n.key=t},i.setTheme=function(t){n.theme=t},i.setStoken=function(t){n.stoken=t},i.setSize=function(t){n.size=t},i.setType=function(t){n.type=t},i.setLang=function(t){n.lang=t},i.setOnLoadFunctionName=function(t){i.onLoadFunctionName=t},i.$get=["$rootScope","$window","$q","$document",function(o,s,a,r){function l(){return u?a.when(u):p}function c(){if(!u)throw new Error("reCaptcha has not been loaded yet.")}var u,h=a.defer(),p=h.promise,d={};s.vcRecaptchaApiLoadedCallback=s.vcRecaptchaApiLoadedCallback||[];var f=function(){u=s.grecaptcha,h.resolve(u)};if(s.vcRecaptchaApiLoadedCallback.push(f),s[i.onLoadFunctionName]=function(){s.vcRecaptchaApiLoadedCallback.forEach(function(t){t()})},t.isDefined(s.grecaptcha))f();else{var g=s.document.createElement("script");g.async=!0,g.defer=!0,g.src="https://www.google.com/recaptcha/api.js?onload="+i.onLoadFunctionName+"&render=explicit",r.find("body").append(g)}return{create:function(t,i){return i.sitekey=i.key||n.key,i.theme=i.theme||n.theme,i.stoken=i.stoken||n.stoken,i.size=i.size||n.size,i.type=i.type||n.type,i.hl=i.lang||n.lang,i.sitekey&&40===i.sitekey.length||e(),l().then(function(e){var n=e.render(t,i);return d[n]=t,n})},reload:function(t){c(),u.reset(t),o.$broadcast("reCaptchaReset",t)},useLang:function(t,e){var i=d[t];if(!i)throw new Error("reCaptcha Widget ID not exists",t);var n=i.querySelector("iframe");if(!e)return n&&n.src&&/[?&]hl=\w+/.test(n.src)?n.src.replace(/.+[?&]hl=(\w+)([^\w].+)?/,"$1"):null;if(n&&n.src){var o=n.src;/[?&]hl=/.test(o)?o=o.replace(/([?&]hl=)\w+/,"$1"+e):o+=(o.indexOf("?")===-1?"?":"&")+"hl="+e,n.src=o}},getResponse:function(t){return c(),u.getResponse(t)},getInstance:function(t){return d[t]},destroy:function(t){delete d[t]}}}]})}(angular),function(t){"use strict";var e=t.module("vcRecaptcha");e.directive("vcRecaptcha",["$document","$timeout","vcRecaptchaService",function(e,i,n){return{restrict:"A",require:"?^^form",scope:{response:"=?ngModel",key:"=?",stoken:"=?",theme:"=?",size:"=?",type:"=?",lang:"=?",tabindex:"=?",required:"=?",onCreate:"&",onSuccess:"&",onExpire:"&"},link:function(o,s,a,r){function l(){r&&r.$setValidity("recaptcha",null),h()}function c(){i(function(){o.response="",u(),o.onExpire({widgetId:o.widgetId})})}function u(){r&&r.$setValidity("recaptcha",o.required===!1?null:Boolean(o.response))}function h(){n.destroy(o.widgetId),t.element(e[0].querySelectorAll(".pls-container")).parent().remove()}o.widgetId=null,r&&t.isDefined(a.required)&&o.$watch("required",u);var p=o.$watch("key",function(e){var r=function(t){i(function(){o.response=t,u(),o.onSuccess({response:t,widgetId:o.widgetId})})};n.create(s[0],{callback:r,key:e,stoken:o.stoken||a.stoken||null,theme:o.theme||a.theme||null,type:o.type||a.type||null,lang:o.lang||a.lang||null,tabindex:o.tabindex||a.tabindex||null,size:o.size||a.size||null,"expired-callback":c}).then(function(e){u(),o.widgetId=e,o.onCreate({widgetId:e}),o.$on("$destroy",l),o.$on("reCaptchaReset",function(i,n){(t.isUndefined(n)||e===n)&&(o.response="",u())})}),p()})}}}])}(angular),!function(t){function e(n){if(i[n])return i[n].exports;var o=i[n]={exports:{},id:n,loaded:!1};return t[n].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var i={};e.m=t,e.c=i,e.p="",e(0)}([function(t,e){"use strict";angular.module("angularModalService",[]).factory("ModalService",["$animate","$document","$compile","$controller","$http","$rootScope","$q","$templateRequest","$timeout",function(t,e,i,n,o,s,a,r,l){function c(){var o=this,c=function(t,e){var i=a.defer();return t?i.resolve(t):e?r(e,!0).then(function(t){i.resolve(t)},function(t){i.reject(t)}):i.reject("No template or templateUrl has been specified."),i.promise},u=function(e,i){var n=e.children();return n.length>0?t.enter(i,e,n[n.length-1]):t.enter(i,e)};o.showModal=function(o){var r=angular.element(e[0].body),h=a.defer();return o.controller?(c(o.template,o.templateUrl).then(function(e){function c(e){f.resolve(e),o.bodyClass&&r[0].classList.remove(o.bodyClass),t.leave(v).then(function(){g.resolve(e),p.$destroy(),m.close=null,h=null,f=null,$=null,m=null,v=null,p=null}),d&&d()}var p=(o.scope||s).$new(),d=s.$on("$locationChangeSuccess",c),f=a.defer(),g=a.defer(),m={$scope:p,close:function(t,e){void 0!==e&&null!==e||(e=0),l(function(){c(t)},e)}};o.inputs&&angular.extend(m,o.inputs);var w=i(e),v=w(p);m.$element=v;var b=p[o.controllerAs],y=n(o.controller,m,!1,o.controllerAs);o.controllerAs&&b&&angular.extend(y,b),o.appendElement?u(o.appendElement,v):u(r,v),o.bodyClass&&r[0].classList.add(o.bodyClass);var $={controller:y,scope:p,element:v,close:f.promise,closed:g.promise};h.resolve($)}).then(null,function(t){h.reject(t)}),h.promise):(h.reject("No controller has been specified."),h.promise)}}return new c}])}]),"undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(t){"use strict";var e=t.fn.jquery.split(" ")[0].split(".");if(e[0]<2&&e[1]<9||1==e[0]&&9==e[1]&&e[2]<1||e[0]>3)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher, but lower than version 4")}(jQuery),+function(t){"use strict";function e(e,n){return this.each(function(){var o=t(this),s=o.data("bs.modal"),a=t.extend({},i.DEFAULTS,o.data(),"object"==typeof e&&e);s||o.data("bs.modal",s=new i(this,a)),"string"==typeof e?s[e](n):a.show&&s.show(n)})}var i=function(e,i){this.options=i,this.$body=t(document.body),this.$element=t(e),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,t.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};i.VERSION="3.3.7",i.TRANSITION_DURATION=300,i.BACKDROP_TRANSITION_DURATION=150,i.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},i.prototype.toggle=function(t){return this.isShown?this.hide():this.show(t)},i.prototype.show=function(e){var n=this,o=t.Event("show.bs.modal",{relatedTarget:e});this.$element.trigger(o),this.isShown||o.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',t.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){n.$element.one("mouseup.dismiss.bs.modal",function(e){t(e.target).is(n.$element)&&(n.ignoreBackdropClick=!0)})}),this.backdrop(function(){var o=t.support.transition&&n.$element.hasClass("fade");n.$element.parent().length||n.$element.appendTo(n.$body),n.$element.show().scrollTop(0),n.adjustDialog(),o&&n.$element[0].offsetWidth,n.$element.addClass("in"),n.enforceFocus();var s=t.Event("shown.bs.modal",{relatedTarget:e});o?n.$dialog.one("bsTransitionEnd",function(){n.$element.trigger("focus").trigger(s)}).emulateTransitionEnd(i.TRANSITION_DURATION):n.$element.trigger("focus").trigger(s)}))},i.prototype.hide=function(e){e&&e.preventDefault(),e=t.Event("hide.bs.modal"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),t(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),t.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",t.proxy(this.hideModal,this)).emulateTransitionEnd(i.TRANSITION_DURATION):this.hideModal())},i.prototype.enforceFocus=function(){t(document).off("focusin.bs.modal").on("focusin.bs.modal",t.proxy(function(t){document===t.target||this.$element[0]===t.target||this.$element.has(t.target).length||this.$element.trigger("focus")},this))},i.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",t.proxy(function(t){27==t.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},i.prototype.resize=function(){this.isShown?t(window).on("resize.bs.modal",t.proxy(this.handleUpdate,this)):t(window).off("resize.bs.modal")},i.prototype.hideModal=function(){var t=this;this.$element.hide(),this.backdrop(function(){t.$body.removeClass("modal-open"),t.resetAdjustments(),t.resetScrollbar(),t.$element.trigger("hidden.bs.modal")})},i.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},i.prototype.backdrop=function(e){var n=this,o=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var s=t.support.transition&&o;if(this.$backdrop=t(document.createElement("div")).addClass("modal-backdrop "+o).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",t.proxy(function(t){return this.ignoreBackdropClick?void(this.ignoreBackdropClick=!1):void(t.target===t.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide()))},this)),s&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!e)return;s?this.$backdrop.one("bsTransitionEnd",e).emulateTransitionEnd(i.BACKDROP_TRANSITION_DURATION):e()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var a=function(){n.removeBackdrop(),e&&e()};t.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",a).emulateTransitionEnd(i.BACKDROP_TRANSITION_DURATION):a()}else e&&e()},i.prototype.handleUpdate=function(){this.adjustDialog()},i.prototype.adjustDialog=function(){var t=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&t?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!t?this.scrollbarWidth:""})},i.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},i.prototype.checkScrollbar=function(){var t=window.innerWidth;if(!t){var e=document.documentElement.getBoundingClientRect();t=e.right-Math.abs(e.left)}this.bodyIsOverflowing=document.body.clientWidth<t,this.scrollbarWidth=this.measureScrollbar()},i.prototype.setScrollbar=function(){var t=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",t+this.scrollbarWidth)},i.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},i.prototype.measureScrollbar=function(){var t=document.createElement("div");t.className="modal-scrollbar-measure",this.$body.append(t);var e=t.offsetWidth-t.clientWidth;return this.$body[0].removeChild(t),e};var n=t.fn.modal;t.fn.modal=e,t.fn.modal.Constructor=i,t.fn.modal.noConflict=function(){return t.fn.modal=n,this},t(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(i){var n=t(this),o=n.attr("href"),s=t(n.attr("data-target")||o&&o.replace(/.*(?=#[^\s]+$)/,"")),a=s.data("bs.modal")?"toggle":t.extend({remote:!/#/.test(o)&&o},s.data(),n.data());n.is("a")&&i.preventDefault(),s.one("show.bs.modal",function(t){t.isDefaultPrevented()||s.one("hidden.bs.modal",function(){n.is(":visible")&&n.trigger("focus")})}),e.call(s,a,this)})}(jQuery),+function(t){"use strict";function e(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var i in e)if(void 0!==t.style[i])return{end:e[i]};return!1}t.fn.emulateTransitionEnd=function(e){var i=!1,n=this;t(this).one("bsTransitionEnd",function(){i=!0});var o=function(){i||t(n).trigger(t.support.transition.end)};return setTimeout(o,e),this},t(function(){t.support.transition=e(),t.support.transition&&(t.event.special.bsTransitionEnd={bindType:t.support.transition.end,delegateType:t.support.transition.end,handle:function(e){return t(e.target).is(this)?e.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery);